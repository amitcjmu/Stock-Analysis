PR Review – Bug batch fixes (2025-08-20)

### Overall
- Good direction: auth-derived user context for dependency endpoints, UUID normalization in collection creation, CSP allowances for Swagger/ReDoc, and apiCall usage in BulkUpload.
- Changes are small, low‑risk, and align with our recent plans.

### What looks correct
- Dependency endpoints: replaced extract_context_from_request with Depends(get_current_user) + UserService, tenant scoping enforced; reasonable error handling.
- Collection create commands: engagement_id normalized to UUID for validators; master_flow_id cast to UUID before assign; safer logging and flow_name defaulting.
- Security headers: CSP exceptions for /docs and /redoc (helps blank Swagger).
- BulkUpload: routes through apiCall (unified headers/error handling).

### Requested adjustments
- **Dependency endpoints**
  - Ensure router base path/tag matches the intended domain (e.g., /api/v1/unified-discovery or /api/v1/dependencies).
  - get_user_context: handle missing engagement explicitly (400 with clear message) or mark endpoints that do not need engagement; document the behavior.
  - Consider 403 (authorization) instead of 400 when the authenticated user lacks required client/engagement, if that matches RBAC policy.

- **Collection create commands**
  - When master_flow_id is None, consider surfacing a warning flag in the response or returning a 5xx; today it only logs. This lets UI prompt a retry.
  - Minor: keep docstring summary on the first line, details below, per style guide.

- **Security headers**
  - Also cover /api/v1/docs and /api/v1/openapi.json (or root_path variants) in the CSP exception; currently only /docs and /redoc are handled.
  - Extract localhost allowlist into a constant to avoid duplication and keep it consistent with other exceptions.

- **BulkUpload**
  - Confirm apiCall includes required multi‑tenant headers (X-Client-Account-ID, X-Engagement-ID) for this route; if not, pass them via options.
  - Follow‑up: large uploads may need chunking/streaming on the backend; worth a separate performance ticket.

### Checks before merge
- Swagger loads on /api/v1/docs (or /docs) and /api/v1/openapi.json returns 200.
- Happy‑path: create collection flow from discovery (UUID conversions work, master id set).
- Dependency analysis endpoints: 401/403 when unauthenticated/unauthorized; 200 when context present.

### Nice‑to‑have (post‑merge)
- Unit tests for get_user_context edge cases and master_flow_id assignment error path.
- Document dependency endpoints auth/context in API docs.

With the above nits, LGTM to merge.
