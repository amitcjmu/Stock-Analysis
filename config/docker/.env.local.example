# Local Development Environment Configuration
# Copy this file to .env.local and customize as needed

# ============================================================================
# Hot Module Reload (HMR) Configuration
# ============================================================================
# CRITICAL: HMR restarts the backend server when Python files change
#
# SAFE TO ENABLE:
#   ✅ Quick API endpoint changes
#   ✅ Pydantic model updates
#   ✅ Simple route additions
#   ✅ Frontend-only development
#
# DANGEROUS TO ENABLE:
#   ❌ Testing Discovery flows (10-15 min runtime)
#   ❌ Testing Assessment flows (15-20 min runtime)
#   ❌ Testing Collection flows (5-10 min runtime)
#   ❌ Any long-running CrewAI agent operations
#   ❌ SSE connection testing
#   ❌ Database migration testing
#
# What happens when HMR triggers during a long-running flow:
#   1. SIGTERM sent to uvicorn → All in-flight requests killed
#   2. Database transaction incomplete → Flow stuck in "running" state
#   3. CrewAI agent context lost → No way to resume
#   4. SSE connection dropped → Frontend shows "disconnected"
#   5. Redis cache inconsistent → Stale progress data
#
# Default: false (safe for flow testing)
# Set to true only when doing quick backend changes without flow testing
UVICORN_RELOAD_ENABLED=false

# ============================================================================
# To Enable HMR (Use with EXTREME CAUTION):
# ============================================================================
# 1. Ensure no flows are running
# 2. Set: UVICORN_RELOAD_ENABLED=true
# 3. Restart backend: docker-compose restart backend
# 4. Make quick changes
# 5. DISABLE before testing flows: UVICORN_RELOAD_ENABLED=false
# 6. Restart backend: docker-compose restart backend

# ============================================================================
# Recommended Workflow for Backend Development:
# ============================================================================
# Scenario 1: Quick API Changes (HMR enabled)
#   - Set UVICORN_RELOAD_ENABLED=true
#   - Edit routes, models, schemas
#   - Test with curl/Postman (avoid long flows)
#   - DISABLE before committing

# Scenario 2: Flow Development (HMR disabled)
#   - Set UVICORN_RELOAD_ENABLED=false
#   - Edit flow logic, agents, crews
#   - Manually restart backend after changes: docker-compose restart backend
#   - Test full flow end-to-end
#   - This is slower but prevents data corruption

# Scenario 3: Database Changes (HMR disabled, ALWAYS)
#   - Set UVICORN_RELOAD_ENABLED=false
#   - Create Alembic migration
#   - Restart backend to apply migration
#   - Never enable HMR during migration testing
