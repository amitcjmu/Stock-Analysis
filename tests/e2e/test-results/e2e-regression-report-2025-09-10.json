{
  "startTime": 1757488420804,
  "endTime": 1757488442171,
  "phases": {
    "phase0-mfo-creation": {
      "name": "MFO Flow Creation",
      "status": "FAIL",
      "duration": 294,
      "flowId": null,
      "steps": [
        {
          "step": "Create Master Flow via MFO",
          "status": "FAIL",
          "duration": 171,
          "errors": [
            "Failed to create flow or capture IDs"
          ],
          "warnings": []
        },
        {
          "step": "Verify Atomic Transaction",
          "status": "FAIL",
          "duration": 60,
          "errors": [],
          "warnings": [
            "Master record not found"
          ]
        },
        {
          "step": "Start Discovery Flow",
          "status": "FAIL",
          "duration": 63,
          "errors": [
            "Failed to start flow"
          ],
          "warnings": []
        }
      ],
      "databaseValidation": {
        "tablesChecked": [
          "crewai_flow_state_extensions",
          "discovery_flows"
        ],
        "recordCounts": {},
        "relationships": {},
        "constraints": {}
      },
      "apiValidation": {
        "endpoints": {
          "/api/v1/master-flows/create": {
            "status": 500,
            "responseTime": 171,
            "errors": [
              "Failed to initialize discovery flow: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column \"user_id\" of relation \"discovery_flows\" violates not-null constraint\nDETAIL:  Failing row contains (9476320b-70b4-4d71-addd-984bcbbcfe17, 6df9d430-9be8-4db1-b082-3a44862d93ad, 6df9d430-9be8-4db1-b082-3a44862d93ad, 11111111-1111-1111-1111-111111111111, 22222222-2222-2222-2222-222222222222, null, null, null, running, 0, f, f, f, f, f, f, engagement, strict, f, {}, {}, null, data_ingestion, null, {}, null, null, null, null, null, null, {}, null, null, null, 2025-09-10 07:13:44.980576+00, 2025-09-10 07:13:44.980579+00, null).\n[SQL: INSERT INTO migration.discovery_flows (id, flow_id, master_flow_id, client_account_id, engagement_id, user_id, data_import_id, flow_name, status, progress_percentage, data_import_completed, field_mapping_completed, data_cleansing_completed, asset_inventory_completed, dependency_analysis_completed, tech_debt_assessment_completed, learning_scope, memory_isolation_level, assessment_ready, phase_state, agent_state, flow_type, current_phase, flow_state, crewai_persistence_id, crewai_state_data, error_message, error_phase, created_at, updated_at, completed_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::VARCHAR, $7::UUID, $8::VARCHAR, $9::VARCHAR, $10::FLOAT, $11::BOOLEAN, $12::BOOLEAN, $13::BOOLEAN, $14::BOOLEAN, $15::BOOLEAN, $16::BOOLEAN, $17::VARCHAR, $18::VARCHAR, $19::BOOLEAN, $20::JSONB, $21::JSONB, $22::VARCHAR, $23::VARCHAR, $24::JSON, $25::UUID, $26::JSONB, $27::VARCHAR, $28::VARCHAR, $29::TIMESTAMP WITH TIME ZONE, $30::TIMESTAMP WITH TIME ZONE, $31::TIMESTAMP WITH TIME ZONE)]\n[parameters: (UUID('9476320b-70b4-4d71-addd-984bcbbcfe17'), UUID('6df9d430-9be8-4db1-b082-3a44862d93ad'), UUID('6df9d430-9be8-4db1-b082-3a44862d93ad'), '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', None, None, None, 'running', 0.0, False, False, False, False, False, False, 'engagement', 'strict', False, '{}', '{}', None, 'data_ingestion', '{}', None, '{}', None, None, datetime.datetime(2025, 9, 10, 7, 13, 44, 980576, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 10, 7, 13, 44, 980579, tzinfo=datetime.timezone.utc), None)]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
            ],
            "responseBody": {
              "detail": "Failed to initialize discovery flow: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column \"user_id\" of relation \"discovery_flows\" violates not-null constraint\nDETAIL:  Failing row contains (9476320b-70b4-4d71-addd-984bcbbcfe17, 6df9d430-9be8-4db1-b082-3a44862d93ad, 6df9d430-9be8-4db1-b082-3a44862d93ad, 11111111-1111-1111-1111-111111111111, 22222222-2222-2222-2222-222222222222, null, null, null, running, 0, f, f, f, f, f, f, engagement, strict, f, {}, {}, null, data_ingestion, null, {}, null, null, null, null, null, null, {}, null, null, null, 2025-09-10 07:13:44.980576+00, 2025-09-10 07:13:44.980579+00, null).\n[SQL: INSERT INTO migration.discovery_flows (id, flow_id, master_flow_id, client_account_id, engagement_id, user_id, data_import_id, flow_name, status, progress_percentage, data_import_completed, field_mapping_completed, data_cleansing_completed, asset_inventory_completed, dependency_analysis_completed, tech_debt_assessment_completed, learning_scope, memory_isolation_level, assessment_ready, phase_state, agent_state, flow_type, current_phase, flow_state, crewai_persistence_id, crewai_state_data, error_message, error_phase, created_at, updated_at, completed_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::VARCHAR, $7::UUID, $8::VARCHAR, $9::VARCHAR, $10::FLOAT, $11::BOOLEAN, $12::BOOLEAN, $13::BOOLEAN, $14::BOOLEAN, $15::BOOLEAN, $16::BOOLEAN, $17::VARCHAR, $18::VARCHAR, $19::BOOLEAN, $20::JSONB, $21::JSONB, $22::VARCHAR, $23::VARCHAR, $24::JSON, $25::UUID, $26::JSONB, $27::VARCHAR, $28::VARCHAR, $29::TIMESTAMP WITH TIME ZONE, $30::TIMESTAMP WITH TIME ZONE, $31::TIMESTAMP WITH TIME ZONE)]\n[parameters: (UUID('9476320b-70b4-4d71-addd-984bcbbcfe17'), UUID('6df9d430-9be8-4db1-b082-3a44862d93ad'), UUID('6df9d430-9be8-4db1-b082-3a44862d93ad'), '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', None, None, None, 'running', 0.0, False, False, False, False, False, False, 'engagement', 'strict', False, '{}', '{}', None, 'data_ingestion', '{}', None, '{}', None, None, datetime.datetime(2025, 9, 10, 7, 13, 44, 980576, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 10, 7, 13, 44, 980579, tzinfo=datetime.timezone.utc), None)]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
            }
          }
        },
        "networkErrors": []
      },
      "frontendValidation": {
        "consoleErrors": [],
        "elementsRendered": {},
        "userInteractions": {},
        "loadingStates": {}
      },
      "fieldNamingValidation": {
        "violations": [],
        "checkedFields": [],
        "allSnakeCase": true
      }
    },
    "phase1-data-import": {
      "name": "Data Import",
      "status": "FAIL",
      "duration": 15611,
      "flowId": null,
      "steps": [],
      "databaseValidation": {
        "tablesChecked": [],
        "recordCounts": {},
        "relationships": {},
        "constraints": {}
      },
      "apiValidation": {
        "endpoints": {},
        "networkErrors": []
      },
      "frontendValidation": {
        "consoleErrors": [],
        "elementsRendered": {},
        "userInteractions": {},
        "loadingStates": {}
      },
      "fieldNamingValidation": {
        "violations": [],
        "checkedFields": [],
        "allSnakeCase": true
      }
    }
  },
  "mfoValidation": {
    "masterFlowCreated": false,
    "childFlowCreated": false,
    "masterFlowId": null,
    "childFlowId": null,
    "atomicTransaction": false,
    "stateTransitions": []
  },
  "errors": {
    "frontend": [],
    "middleware": [],
    "backend": [],
    "orm": [
      {
        "timestamp": "2025-09-10T07:14:02.107Z",
        "source": "Phase 1 Exception",
        "message": "page.waitForURL: Timeout 15000ms exceeded.\n=========================== logs ===========================\nwaiting for navigation to \"**/discovery/cmdb-import\" until \"load\"\n============================================================",
        "stack": "page.waitForURL: Timeout 15000ms exceeded.\n=========================== logs ===========================\nwaiting for navigation to \"**/discovery/cmdb-import\" until \"load\"\n============================================================\n    at /Users/chocka/CursorProjects/migrate-ui-orchestrator/tests/e2e/regression/discovery/discovery-flow-full-e2e-regression.spec.ts:504:18"
      }
    ],
    "database": []
  },
  "performance": {
    "phaseTimings": {
      "phase0-mfo-creation": 294,
      "phase1-data-import": 15611
    },
    "apiResponseTimes": {},
    "dbQueryTimes": {}
  },
  "screenshots": [],
  "summary": {
    "totalDuration": 21367,
    "totalPhases": 2,
    "passedPhases": 0,
    "failedPhases": 2,
    "totalErrors": 1,
    "screenshotCount": 0,
    "mfoValidationPassed": false,
    "fieldNamingCompliant": true
  }
}