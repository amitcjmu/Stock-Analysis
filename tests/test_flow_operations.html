<!DOCTYPE html>
<html>
<head>
    <title>Test Flow Operations</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Test Flow Operations</h1>
    
    <div>
        <h2>Test Resume Flow</h2>
        <button onclick="testResumeFlow()">Resume Flow ce8245a2-628b-48b2-8a11-592834277c29</button>
        <div id="resumeResult"></div>
    </div>

    <div>
        <h2>Test Get Active Flows</h2>
        <button onclick="testGetActiveFlows()">Get Active Flows</button>
        <div id="activeFlowsResult"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        const CLIENT_ACCOUNT_ID = '11111111-1111-1111-1111-111111111111';
        const ENGAGEMENT_ID = '22222222-2222-2222-2222-222222222222';

        const getHeaders = () => ({
            'X-Client-Account-ID': CLIENT_ACCOUNT_ID,
            'X-Engagement-ID': ENGAGEMENT_ID,
            'Content-Type': 'application/json',
            'Authorization': 'Bearer demo-token'
        });

        async function testResumeFlow() {
            const flowId = 'ce8245a2-628b-48b2-8a11-592834277c29';
            const resultDiv = document.getElementById('resumeResult');
            
            try {
                resultDiv.innerHTML = 'Testing resume flow...';
                
                const response = await axios.post(
                    `${API_BASE}/api/v1/flows/${flowId}/resume`,
                    {},
                    { headers: getHeaders() }
                );
                
                resultDiv.innerHTML = `<h3>Success!</h3><pre>${JSON.stringify(response.data, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML = `<h3>Error:</h3><pre>${error.response?.data ? JSON.stringify(error.response.data, null, 2) : error.message}</pre>`;
            }
        }

        async function testGetActiveFlows() {
            const resultDiv = document.getElementById('activeFlowsResult');
            
            try {
                resultDiv.innerHTML = 'Testing get active flows...';
                
                const response = await axios.get(
                    `${API_BASE}/api/v1/master-flows/active`,
                    { 
                        headers: getHeaders(),
                        params: { flowType: 'discovery' }
                    }
                );
                
                resultDiv.innerHTML = `<h3>Success!</h3><pre>${JSON.stringify(response.data, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML = `<h3>Error:</h3><pre>${error.response?.data ? JSON.stringify(error.response.data, null, 2) : error.message}</pre>`;
            }
        }
    </script>
</body>
</html>