/**
 * Engagement List Component Types
 * 
 * Type definitions for engagement listing, filtering, sorting, and bulk operations.
 * Provides comprehensive table/card/list view configurations.
 * 
 * Generated by CC (Claude Code) - Modularized from engagement-management.ts
 */

import { ReactNode } from 'react';
import { BaseComponentProps } from '../../shared';
import { Engagement, EngagementStatus, EngagementType } from './core-types';

// Main Engagement List Component
export interface EngagementListProps extends BaseComponentProps {
  engagements: Engagement[];
  loading?: boolean;
  error?: string | null;
  searchable?: boolean;
  filterable?: boolean;
  sortable?: boolean;
  selectable?: boolean;
  pagination?: EngagementListPaginationConfig;
  actions?: EngagementAction[];
  bulkActions?: EngagementBulkAction[];
  columns?: EngagementTableColumn[];
  filters?: EngagementFilter[];
  sorting?: EngagementSortConfig;
  onEngagementClick?: (engagement: Engagement) => void;
  onEngagementSelect?: (selectedEngagements: Engagement[]) => void;
  onEngagementAction?: (action: string, engagement: Engagement) => void;
  onBulkAction?: (action: string, engagements: Engagement[]) => void;
  onFiltersChange?: (filters: Record<string, unknown>) => void;
  onSortChange?: (sort: EngagementSortConfig) => void;
  onPageChange?: (page: number, pageSize: number) => void;
  onRefresh?: () => void;
  renderEngagementRow?: (engagement: Engagement, index: number) => ReactNode;
  renderEngagementActions?: (engagement: Engagement) => ReactNode;
  renderEmptyState?: () => ReactNode;
  renderLoadingState?: () => ReactNode;
  renderErrorState?: (error: string) => ReactNode;
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  variant?: 'table' | 'card' | 'list' | 'kanban';
  density?: 'compact' | 'normal' | 'comfortable';
  showClient?: boolean;
  showStatus?: boolean;
  showProgress?: boolean;
  showTeam?: boolean;
  showTimeline?: boolean;
  showActions?: boolean;
  enableQuickEdit?: boolean;
  enableInlineEdit?: boolean;
  enableBulkOperations?: boolean;
  exportEnabled?: boolean;
  exportFormats?: ExportFormat[];
  onExport?: (format: ExportFormat, engagements: Engagement[]) => void;
}

// Pagination Configuration
export interface EngagementListPaginationConfig {
  enabled: boolean;
  pageSize: number;
  pageSizes: number[];
  showPageSizeSelector: boolean;
  showPageInfo: boolean;
  showFirstLast: boolean;
  showPrevNext: boolean;
}

// Action Configurations
export interface EngagementAction {
  id: string;
  label: string;
  icon?: string;
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link' | 'destructive';
  size?: 'xs' | 'sm' | 'md' | 'lg';
  disabled?: boolean;
  condition?: (engagement: Engagement) => boolean;
  confirmation?: ActionConfirmation;
}

export interface ActionConfirmation {
  title: string;
  description: string;
  confirmText?: string;
  cancelText?: string;
  variant?: 'default' | 'destructive';
}

export interface EngagementBulkAction {
  id: string;
  label: string;
  icon?: string;
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link' | 'destructive';
  size?: 'xs' | 'sm' | 'md' | 'lg';
  disabled?: boolean;
  condition?: (engagements: Engagement[]) => boolean;
  confirmation?: BulkActionConfirmation;
  requireConfirmation?: boolean;
  maxSelection?: number;
  minSelection?: number;
}

export interface BulkActionConfirmation {
  title: string;
  description: string;
  confirmText?: string;
  cancelText?: string;
  variant?: 'default' | 'destructive';
  showAffectedCount?: boolean;
}

// Table Column Configuration
export interface EngagementTableColumn {
  id: string;
  header: string;
  accessor: string;
  width?: number | string;
  minWidth?: number;
  maxWidth?: number;
  resizable?: boolean;
  sortable?: boolean;
  filterable?: boolean;
  searchable?: boolean;
  align?: 'left' | 'center' | 'right';
  sticky?: boolean;
  hidden?: boolean;
  formatter?: ColumnFormatter;
  renderer?: ColumnRenderer;
  headerRenderer?: ColumnHeaderRenderer;
  cellProps?: Record<string, unknown>;
  headerProps?: Record<string, unknown>;
}

export type ColumnFormatter = (value: unknown, engagement: Engagement) => string | number | ReactNode;
export type ColumnRenderer = (value: unknown, engagement: Engagement, column: EngagementTableColumn) => ReactNode;
export type ColumnHeaderRenderer = (column: EngagementTableColumn) => ReactNode;

// Filter Configuration
export interface EngagementFilter {
  id: string;
  label: string;
  field: string;
  type: FilterType;
  options?: FilterOption[];
  multiple?: boolean;
  searchable?: boolean;
  clearable?: boolean;
  placeholder?: string;
  defaultValue?: unknown;
  validation?: FilterValidation;
  dependency?: FilterDependency;
  renderer?: FilterRenderer;
}

export type FilterType = 
  | 'text' | 'number' | 'date' | 'dateRange' | 'select' | 'multiSelect' 
  | 'boolean' | 'tag' | 'autocomplete' | 'range' | 'custom';

export interface FilterOption {
  label: string;
  value: unknown;
  description?: string;
  icon?: string;
  disabled?: boolean;
  group?: string;
}

export interface FilterValidation {
  required?: boolean;
  min?: number;
  max?: number;
  pattern?: string;
  custom?: (value: unknown) => boolean | string;
}

export interface FilterDependency {
  field: string;
  condition: (value: unknown) => boolean;
  action: 'show' | 'hide' | 'enable' | 'disable' | 'reset';
}

export type FilterRenderer = (
  filter: EngagementFilter, 
  value: unknown, 
  onChange: (value: unknown) => void
) => ReactNode;

// Sort Configuration
export interface EngagementSortConfig {
  field: string;
  direction: 'asc' | 'desc';
  priority?: number;
}

// Export Configuration
export interface ExportFormat {
  id: string;
  label: string;
  extension: string;
  mimeType: string;
  options?: ExportOptions;
}

export interface ExportOptions {
  includeHeaders?: boolean;
  includeMetadata?: boolean;
  includeFilters?: boolean;
  dateFormat?: string;
  timeZone?: string;
  encoding?: string;
  delimiter?: string;
  quote?: string;
  escape?: string;
  customFields?: string[];
  template?: string;
}

// Saved Filter Management
export interface SavedFilter {
  id: string;
  name: string;
  description?: string;
  filters: Record<string, unknown>;
  sorting?: EngagementSortConfig[];
  columns?: string[];
  isDefault?: boolean;
  isGlobal?: boolean;
  createdBy: string;
  createdAt: string;
  updatedAt: string;
  usageCount?: number;
  tags?: string[];
}

// Search Configuration
export interface EngagementSearchConfig {
  enabled: boolean;
  placeholder?: string;
  searchFields: string[];
  fuzzySearch?: boolean;
  minimumLength?: number;
  debounceDelay?: number;
  caseSensitive?: boolean;
  highlightMatches?: boolean;
  searchOperators?: SearchOperator[];
}

export interface SearchOperator {
  operator: string;
  description: string;
  example: string;
  syntax: string;
}

// View State Management
export interface EngagementListViewState {
  selectedEngagements: string[];
  filters: Record<string, unknown>;
  sorting: EngagementSortConfig[];
  pagination: PaginationState;
  columns: ColumnState[];
  search: string;
  viewMode: 'table' | 'card' | 'list' | 'kanban';
  density: 'compact' | 'normal' | 'comfortable';
}

export interface PaginationState {
  page: number;
  pageSize: number;
  total: number;
}

export interface ColumnState {
  id: string;
  visible: boolean;
  width?: number;
  order: number;
  pinned?: 'left' | 'right' | false;
}

// Quick Actions
export interface QuickAction {
  id: string;
  label: string;
  icon?: string;
  shortcut?: string;
  condition?: (engagement: Engagement) => boolean;
  handler: (engagement: Engagement) => void;
}

// Bulk Operations
export interface BulkOperationResult {
  success: boolean;
  affected: number;
  errors: BulkOperationError[];
  warnings: BulkOperationWarning[];
}

export interface BulkOperationError {
  engagementId: string;
  error: string;
  details?: string;
}

export interface BulkOperationWarning {
  engagementId: string;
  warning: string;
  details?: string;
}

// List Item Renderers for different view modes
export interface EngagementCardProps {
  engagement: Engagement;
  selected?: boolean;
  actions?: EngagementAction[];
  onClick?: (engagement: Engagement) => void;
  onSelect?: (engagement: Engagement, selected: boolean) => void;
  onAction?: (action: string, engagement: Engagement) => void;
  size?: 'xs' | 'sm' | 'md' | 'lg';
  showClient?: boolean;
  showStatus?: boolean;
  showProgress?: boolean;
  showTeam?: boolean;
  showTimeline?: boolean;
  enableQuickEdit?: boolean;
}

export interface EngagementListItemProps {
  engagement: Engagement;
  selected?: boolean;
  actions?: EngagementAction[];
  onClick?: (engagement: Engagement) => void;
  onSelect?: (engagement: Engagement, selected: boolean) => void;
  onAction?: (action: string, engagement: Engagement) => void;
  dense?: boolean;
  showClient?: boolean;
  showStatus?: boolean;
  showProgress?: boolean;
  showTeam?: boolean;
  showTimeline?: boolean;
}

export interface EngagementKanbanCardProps {
  engagement: Engagement;
  actions?: EngagementAction[];
  onClick?: (engagement: Engagement) => void;
  onAction?: (action: string, engagement: Engagement) => void;
  draggable?: boolean;
  size?: 'sm' | 'md' | 'lg';
  showClient?: boolean;
  showProgress?: boolean;
  showTeam?: boolean;
  showDueDate?: boolean;
}

// Status indicators and badges
export interface EngagementStatusBadgeProps {
  status: EngagementStatus;
  size?: 'xs' | 'sm' | 'md' | 'lg';
  variant?: 'default' | 'outline' | 'solid';
  showIcon?: boolean;
  showText?: boolean;
}

export interface EngagementTypeBadgeProps {
  type: EngagementType;
  size?: 'xs' | 'sm' | 'md' | 'lg';
  variant?: 'default' | 'outline' | 'solid';
  showIcon?: boolean;
  showText?: boolean;
}

// Progress indicators
export interface EngagementProgressProps {
  engagement: Engagement;
  size?: 'xs' | 'sm' | 'md' | 'lg';
  variant?: 'linear' | 'circular' | 'steps';
  showPercentage?: boolean;
  showPhases?: boolean;
  animated?: boolean;
}

// Team display
export interface EngagementTeamProps {
  engagement: Engagement;
  size?: 'xs' | 'sm' | 'md' | 'lg';
  max?: number;
  showRoles?: boolean;
  showAvatars?: boolean;
  showNames?: boolean;
  onClick?: (member: unknown) => void;
}

// Timeline display
export interface EngagementTimelineProps {
  engagement: Engagement;
  variant?: 'compact' | 'detailed';
  showMilestones?: boolean;
  showPhases?: boolean;
  interactive?: boolean;
  onClick?: (item: unknown) => void;
}