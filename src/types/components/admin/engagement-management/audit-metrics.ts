/**
 * Audit and Metrics Types
 * 
 * Types for audit logging, metrics, and summary information
 * in engagement management.
 * 
 * Generated by CC (Claude Code) - Modularized from core-types.ts
 */

import type { User } from './team-management';
import type { EngagementType, EngagementStatus } from './engagement-core';
import type { RiskSeverity } from './risk-issue-management';

// Audit and History Types
export interface EngagementAuditLog {
  id: string;
  engagementId: string;
  action: 'created' | 'updated' | 'deleted' | 'status_changed' | 'phase_started' | 'phase_completed' | 'milestone_achieved';
  entity: 'engagement' | 'phase' | 'deliverable' | 'milestone' | 'risk' | 'issue' | 'artifact';
  entityId: string;
  changes: FieldChange[];
  user: User;
  timestamp: string;
  metadata?: Record<string, string | number | boolean | null>;
}

export interface FieldChange {
  field: string;
  oldValue: unknown;
  newValue: unknown;
  dataType: string;
}

// Summary and Statistics Types
export interface EngagementSummary {
  id: string;
  name: string;
  type: EngagementType;
  status: EngagementStatus;
  client: string;
  startDate: string;
  endDate?: string;
  progress: number;
  budget?: number;
  actualCost?: number;
  teamSize: number;
  phaseCount: number;
  completedPhases: number;
  deliverableCount: number;
  completedDeliverables: number;
  milestoneCount: number;
  achievedMilestones: number;
  activeRisks: number;
  openIssues: number;
  healthScore: number;
  isOnTrack: boolean;
  daysRemaining?: number;
}

export interface EngagementMetrics {
  totalEngagements: number;
  activeEngagements: number;
  completedEngagements: number;
  averageDuration: number;
  averageBudget: number;
  averageTeamSize: number;
  onTimeDeliveryRate: number;
  budgetVarianceRate: number;
  clientSatisfactionScore: number;
  teamUtilization: number;
  riskDistribution: Record<RiskSeverity, number>;
  typeDistribution: Record<EngagementType, number>;
  statusDistribution: Record<EngagementStatus, number>;
}
