/**
 * Template and Field Management Types
 * 
 * Types for managing engagement templates, custom fields, and validation
 * in engagement management.
 * 
 * Generated by CC (Claude Code) - Modularized from core-types.ts
 */

import { User } from './team-management';
import { EngagementType, DeliverableType } from './engagement-core';

// Template Types for Creation
export interface EngagementTemplate {
  id: string;
  name: string;
  description?: string;
  type: EngagementType;
  isDefault: boolean;
  isPublic: boolean;
  phases: EngagementPhaseTemplate[];
  deliverables: DeliverableTemplate[];
  milestones: MilestoneTemplate[];
  documents: DocumentTemplate[];
  fields: EngagementField[];
  estimatedDuration: number;
  estimatedBudget?: number;
  requiredSkills: string[];
  createdBy: User;
  createdAt: string;
  updatedAt: string;
  usageCount: number;
  tags: string[];
  metadata?: Record<string, string | number | boolean | null>;
}

export interface EngagementPhaseTemplate {
  id: string;
  name: string;
  description?: string;
  order: number;
  estimatedDuration: number;
  estimatedBudget?: number;
  deliverables: DeliverableTemplate[];
  milestones: MilestoneTemplate[];
  requiredSkills: string[];
  dependencies: string[];
  prerequisites: string[];
  isOptional: boolean;
  metadata?: Record<string, string | number | boolean | null>;
}

export interface DeliverableTemplate {
  id: string;
  name: string;
  description?: string;
  type: DeliverableType;
  template?: string;
  estimatedEffort: number;
  requiredSkills: string[];
  dependencies: string[];
  reviewRequired: boolean;
  approvalRequired: boolean;
  isOptional: boolean;
  qualityGates: string[];
  metadata?: Record<string, string | number | boolean | null>;
}

export interface MilestoneTemplate {
  id: string;
  name: string;
  description?: string;
  type: 'phase_gate' | 'delivery' | 'approval' | 'go_live' | 'review' | 'custom';
  criteria: MilestoneCriteriaTemplate[];
  dependencies: string[];
  deliverables: string[];
  isGate: boolean;
  isCritical: boolean;
  weight: number;
  estimatedDaysFromStart: number;
  metadata?: Record<string, string | number | boolean | null>;
}

export interface MilestoneCriteriaTemplate {
  description: string;
  weight: number;
  isMandatory: boolean;
  evaluationMethod?: string;
}

export interface DocumentTemplate {
  id: string;
  name: string;
  description?: string;
  type: DeliverableType;
  template: string;
  version: string;
  isActive: boolean;
  category: string;
  requiredFields: string[];
  optionalFields: string[];
  createdBy: User;
  createdAt: string;
  updatedAt: string;
}

// Custom Field Types
export interface EngagementField {
  id: string;
  name: string;
  label: string;
  type: 'text' | 'number' | 'date' | 'boolean' | 'select' | 'multiselect' | 'textarea' | 'file';
  required: boolean;
  defaultValue?: unknown;
  options?: FieldOption[];
  validation?: ValidationRule;
  dependencies?: FieldDependency[];
  section: string;
  order: number;
  isActive: boolean;
  metadata?: Record<string, string | number | boolean | null>;
}

export interface FieldOption {
  label: string;
  value: unknown;
  isDefault?: boolean;
  isActive?: boolean;
  order?: number;
}

export interface FieldDependency {
  field: string;
  condition: string;
  action: 'show' | 'hide' | 'enable' | 'disable' | 'require';
}

export interface ValidationRule {
  type: 'required' | 'minLength' | 'maxLength' | 'pattern' | 'range' | 'custom';
  value?: unknown;
  message?: string;
  customValidator?: string;
}
