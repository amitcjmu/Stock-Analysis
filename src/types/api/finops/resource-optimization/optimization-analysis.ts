/**
 * FinOps Resource Optimization Analysis Types
 * 
 * Type definitions for resource utilization analysis and optimization recommendations.
 * Covers analysis requests/responses, utilization summaries, and detailed analysis results.
 * 
 * Generated by CC (Claude Code) - Modularized from resource-optimization.ts
 */

import {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext
} from '../../shared';
import { CostAmount } from '../cost-analysis';
import {
  ResourceType,
  UtilizationMetric,
  UtilizationThreshold,
  ResourceAnalysisScope,
  ResourceUtilization,
  ResourceEfficiency,
  UnderutilizedResource,
  OverutilizedResource,
  UtilizationTrend,
  UtilizationAnomaly,
  ResourceConfiguration
} from './resource-discovery';

// Resource Optimization Analysis APIs
export interface AnalyzeResourceUtilizationRequest extends BaseApiRequest {
  flowId: string;
  resourceTypes: ResourceType[];
  timeRange: {
    start: string;
    end: string;
  };
  metrics: UtilizationMetric[];
  thresholds: UtilizationThreshold[];
  includeRecommendations?: boolean;
  context: MultiTenantContext;
}

export interface AnalyzeResourceUtilizationResponse extends BaseApiResponse<ResourceUtilizationAnalysis> {
  data: ResourceUtilizationAnalysis;
  analysisId: string;
  utilizationSummary: UtilizationSummary;
  underutilizedResources: UnderutilizedResource[];
  overutilizedResources: OverutilizedResource[];
  recommendations: ResourceRecommendation[];
}

export interface ResourceUtilizationAnalysis {
  id: string;
  flowId: string;
  analysisType: 'current' | 'historical' | 'trending';
  timeRange: {
    start: string;
    end: string;
  };
  scope: ResourceAnalysisScope;
  summary: UtilizationSummary;
  resourceAnalysis: ResourceAnalysisDetail[];
  recommendations: ResourceRecommendation[];
  trends: UtilizationTrend[];
  anomalies: UtilizationAnomaly[];
  generatedAt: string;
}

export interface UtilizationSummary {
  totalResources: number;
  underutilizedCount: number;
  overutilizedCount: number;
  optimalCount: number;
  averageUtilization: Record<string, number>;
  totalCost: CostAmount;
  potentialSavings: CostAmount;
  efficiency: ResourceEfficiency;
}

export interface ResourceAnalysisDetail {
  resourceId: string;
  resourceType: ResourceType;
  name: string;
  cost: CostAmount;
  utilization: ResourceUtilization;
  performance: import('./performance-optimization').ResourcePerformance;
  recommendations: ResourceSpecificRecommendation[];
  tags: Record<string, string>;
}

export interface ResourceRecommendation {
  id: string;
  resourceId: string;
  type: 'rightsize' | 'shutdown' | 'upgrade' | 'migrate' | 'optimize';
  priority: 'low' | 'medium' | 'high' | 'critical';
  title: string;
  description: string;
  currentConfiguration: ResourceConfiguration;
  recommendedConfiguration: ResourceConfiguration;
  estimatedSavings: CostAmount;
  performanceImpact: string;
  implementationComplexity: 'low' | 'medium' | 'high';
  risk: 'low' | 'medium' | 'high';
  timeline: string;
  prerequisites: string[];
  validationSteps: string[];
}

export interface ResourceSpecificRecommendation extends ResourceRecommendation {
  confidence: number;
  basedOnPeriod: string;
  assumptions: string[];
  alternatives: AlternativeRecommendation[];
}

export interface AlternativeRecommendation {
  description: string;
  savings: CostAmount;
  risk: 'low' | 'medium' | 'high';
  effort: 'low' | 'medium' | 'high';
}