/**
 * FinOps Configuration Types
 *
 * Type definitions for flow configuration including automation, monitoring, alerting,
 * reporting, optimization settings, governance config, and integrations.
 *
 * Generated by CC - Modularized from flow-management.ts
 */

import type { ConfigurationValue } from '../../../shared/config-types';
import type {
  GovernancePolicy,
  GovernanceControl,
  AuditConfig,
  ComplianceConfig
} from './governance-types';
import type {
  OptimizationStrategy,
  OptimizationPriority,
  OptimizationConstraint,
  OptimizationTarget
} from './optimization-types';

export interface FinOpsFlowConfiguration {
  automation: FinOpsAutomation;
  monitoring: FinOpsMonitoring;
  alerting: FinOpsAlerting;
  reporting: FinOpsReporting;
  optimization: FinOpsOptimization;
  governance: FinOpsGovernanceConfig;
  integration: FinOpsIntegration;
}

// Automation Configuration
export interface FinOpsAutomation {
  enabled: boolean;
  rules: AutomationRule[];
  actions: AutomationAction[];
  schedule: AutomationSchedule;
  limits: AutomationLimits;
}

export interface AutomationRule {
  id: string;
  name: string;
  condition: string;
  action: string;
  enabled: boolean;
}

export interface AutomationAction {
  type: string;
  parameters: Record<string, ConfigurationValue>;
  approval?: string;
}

export interface AutomationSchedule {
  frequency: string;
  timezone: string;
  blackoutPeriods: string[];
}

export interface AutomationLimits {
  maxActionsPerDay: number;
  maxCostImpact: number;
  requireApprovalAbove: number;
}

// Monitoring Configuration
export interface FinOpsMonitoring {
  metrics: MonitoringMetric[];
  dashboards: DashboardConfig[];
  alerts: AlertConfig[];
  reports: ReportConfig[];
}

export interface MonitoringMetric {
  name: string;
  type: string;
  source: string;
  calculation: string;
  frequency: string;
}

export interface DashboardConfig {
  name: string;
  widgets: WidgetConfig[];
  refresh: string;
  access: string[];
}

export interface WidgetConfig {
  type: string;
  metric: string;
  visualization: string;
  position: { x: number; y: number; w: number; h: number };
}

export interface AlertConfig {
  name: string;
  metric: string;
  condition: string;
  threshold: number;
  severity: string;
  channels: string[];
}

export interface ReportConfig {
  name: string;
  type: string;
  schedule: string;
  recipients: string[];
  format: string;
}

// Alerting Configuration
export interface FinOpsAlerting {
  rules: AlertRule[];
  channels: AlertChannel[];
  suppression: SuppressionRule[];
  escalation: AlertEscalation[];
}

export interface AlertRule {
  id: string;
  name: string;
  metric: string;
  condition: string;
  threshold: ConfigurationValue;
  severity: 'info' | 'warning' | 'critical';
  enabled: boolean;
}

export interface AlertChannel {
  type: 'email' | 'sms' | 'slack' | 'webhook';
  config: Record<string, string>;
  enabled: boolean;
}

export interface SuppressionRule {
  condition: string;
  duration: string;
  reason: string;
}

export interface AlertEscalation {
  severity: string;
  timeframe: string;
  escalateTo: string;
}

// Reporting Configuration
export interface FinOpsReporting {
  templates: ReportTemplate[];
  schedule: ReportSchedule[];
  distribution: ReportDistribution[];
  retention: ReportRetention;
}

export interface ReportTemplate {
  id: string;
  name: string;
  type: string;
  sections: ReportSection[];
  format: string[];
}

export interface ReportSection {
  name: string;
  type: string;
  metrics: string[];
  visualization?: string;
}

export interface ReportSchedule {
  reportId: string;
  frequency: string;
  time: string;
  timezone: string;
}

export interface ReportDistribution {
  reportId: string;
  recipients: string[];
  method: string;
}

export interface ReportRetention {
  duration: string;
  archiveLocation: string;
  compressionEnabled: boolean;
}

// Optimization Configuration
export interface FinOpsOptimization {
  strategies: OptimizationStrategy[];
  priorities: OptimizationPriority[];
  constraints: OptimizationConstraint[];
  targets: OptimizationTarget[];
}

// Governance Configuration
export interface FinOpsGovernanceConfig {
  policies: GovernancePolicy[];
  controls: GovernanceControl[];
  auditing: AuditConfig;
  compliance: ComplianceConfig;
}

// Integration Configuration
export interface FinOpsIntegration {
  cloudProviders: CloudProviderIntegration[];
  tools: ToolIntegration[];
  apis: ApiIntegration[];
  webhooks: WebhookIntegration[];
}

export interface CloudProviderIntegration {
  provider: string;
  accounts: string[];
  regions: string[];
  services: string[];
  credentials: string;
}

export interface ToolIntegration {
  name: string;
  type: string;
  endpoint: string;
  authentication: string;
  syncFrequency: string;
}

export interface ApiIntegration {
  name: string;
  endpoint: string;
  version: string;
  authentication: string;
  rateLimit: number;
}

export interface WebhookIntegration {
  name: string;
  url: string;
  events: string[];
  authentication: string;
  retry: RetryConfig;
}

export interface RetryConfig {
  attempts: number;
  backoff: string;
  maxDelay: number;
}
