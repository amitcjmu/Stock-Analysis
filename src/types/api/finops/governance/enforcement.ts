/**
 * Policy Enforcement Types
 * 
 * Enforcement automation, actions, exceptions, and execution tracking.
 * 
 * Generated by CC - Claude Code
 */

import type {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext
} from '../../shared';

// Enforcement APIs
export interface EnforceCostGovernanceRequest extends BaseApiRequest {
  policyId: string;
  enforcementAction: 'notify' | 'restrict' | 'terminate' | 'escalate';
  violationIds?: string[];
  overrideApproval?: string;
  gracePeriod?: number;
  context: MultiTenantContext;
}

export interface EnforceCostGovernanceResponse extends BaseApiResponse<EnforcementResult> {
  data: EnforcementResult;
  enforcementId: string;
  actionsExecuted: EnforcementAction[];
  exceptions: EnforcementException[];
  notifications: EnforcementNotification[];
}

// Enforcement Types
export interface PolicyEnforcement {
  mode: 'monitoring' | 'advisory' | 'preventive' | 'corrective';
  strictness: 'lenient' | 'moderate' | 'strict' | 'rigid';
  automation: EnforcementAutomation;
  notifications: EnforcementNotification[];
  escalation: EnforcementEscalation;
  exceptions: EnforcementException[];
}

export interface EnforcementAutomation {
  enabled: boolean;
  triggers: AutomationTrigger[];
  actions: AutomationAction[];
  safeguards: AutomationSafeguard[];
  rollback: AutomationRollback;
}

export interface AutomationTrigger {
  event: string;
  condition: string;
  threshold?: unknown;
  frequency?: string;
}

export interface AutomationAction {
  type: string;
  parameters: Record<string, string | number | boolean | null>;
  prerequisites: string[];
  validation: string[];
}

export interface AutomationSafeguard {
  type: 'rate_limiting' | 'approval_required' | 'testing_required' | 'rollback_plan';
  configuration: Record<string, string | number | boolean | null>;
  override: boolean;
}

export interface AutomationRollback {
  enabled: boolean;
  triggers: string[];
  procedures: string[];
  timeLimit: string;
}

export interface EnforcementNotification {
  trigger: 'violation' | 'warning' | 'compliance' | 'exception';
  recipients: NotificationRecipient[];
  channels: NotificationChannel[];
  templates: NotificationTemplate[];
  frequency: string;
}

export interface NotificationRecipient {
  type: 'user' | 'role' | 'group' | 'external';
  identifier: string;
  escalation: boolean;
}

export interface NotificationChannel {
  type: 'email' | 'slack' | 'webhook' | 'dashboard' | 'ticket';
  configuration: Record<string, string | number | boolean | null>;
  priority: number;
}

export interface NotificationTemplate {
  type: string;
  content: string;
  variables: string[];
  localization: Record<string, string>;
}

export interface EnforcementEscalation {
  enabled: boolean;
  levels: EscalationLevel[];
  timeouts: string[];
  finalActions: string[];
}

export interface EscalationLevel {
  level: number;
  escalateTo: string[];
  timeout: string;
  actions: string[];
}

export interface EnforcementResult {
  id: string;
  policyId: string;
  action: string;
  status: 'success' | 'failure' | 'partial';
  summary: EnforcementSummary;
  actionsExecuted: EnforcementAction[];
  exceptions: EnforcementException[];
  notifications: EnforcementNotification[];
  auditTrail: string[];
  timestamp: string;
}

export interface EnforcementSummary {
  violationsAddressed: number;
  actionsExecuted: number;
  exceptionsGranted: number;
  compliance_improvement: number;
  cost_impact: number;
}

export interface EnforcementAction {
  id: string;
  type: 'block' | 'modify' | 'approve' | 'escalate' | 'notify';
  target: string;
  description: string;
  automated: boolean;
  status: 'success' | 'failure' | 'pending';
  timestamp: string;
  details: Record<string, string | number | boolean | null>;
}

export interface EnforcementException {
  id: string;
  reason: string;
  type: 'temporary' | 'permanent' | 'conditional';
  approver: string;
  conditions: string[];
  expiration?: string;
  monitoring: boolean;
}

export interface EnforcementPlan {
  strategy: EnforcementStrategy;
  phases: EnforcementPhase[];
  automation: EnforcementAutomation;
  monitoring: EnforcementMonitoring;
  escalation: EnforcementEscalation;
}

export interface EnforcementStrategy {
  approach: 'gradual' | 'immediate' | 'phased';
  scope: 'full' | 'pilot' | 'targeted';
  communication: CommunicationStrategy;
  training: TrainingStrategy;
}

export interface CommunicationStrategy {
  channels: string[];
  frequency: string;
  stakeholders: string[];
  messaging: string[];
}

export interface TrainingStrategy {
  required: boolean;
  modules: string[];
  delivery: string[];
  assessment: boolean;
}

export interface EnforcementPhase {
  id: string;
  name: string;
  scope: string[];
  duration: string;
  success_criteria: string[];
  rollback_triggers: string[];
}

export interface EnforcementMonitoring {
  metrics: string[];
  dashboards: string[];
  alerts: string[];
  reporting: string[];
}