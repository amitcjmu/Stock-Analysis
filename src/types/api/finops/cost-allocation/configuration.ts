/**
 * Cost Allocation Configuration Types
 * 
 * API request/response interfaces and core configuration types for cost allocation.
 * Includes configuration management, scope definitions, and basic allocation structures.
 * 
 * Generated by CC (Claude Code) - Modularized from cost-allocation.ts
 */

import {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext,
  CreateRequest,
  CreateResponse
} from '../../shared';
import { CostAmount } from '../cost-analysis';
// Forward type declarations - actual types defined in respective modules
export interface AllocationRule {
  id: string;
  [key: string]: any;
}

export interface CostPool {
  id: string;
  [key: string]: any;
}

export interface ChargebackModel {
  id: string;
  [key: string]: any;
}

export interface AllocationSchedule {
  frequency: string;
  [key: string]: any;
}

export interface AllocationReporting {
  reports: any[];
  [key: string]: any;
}

export interface AllocationApprovalConfig {
  required: string[];
  [key: string]: any;
}

export interface AllocationValidation {
  checks: any[];
  [key: string]: any;
}

export interface AllocationExecutionSummary {
  executionId: string;
  [key: string]: any;
}

export interface AllocationPerformance {
  executionTime: any;
  [key: string]: any;
}

export interface AllocationValidationResult {
  check: string;
  [key: string]: any;
}

export interface CostAllocationExecution {
  id: string;
  [key: string]: any;
}

export interface AllocatedCost {
  id: string;
  [key: string]: any;
}

export interface Chargeback {
  id: string;
  [key: string]: any;
}

export interface AllocationApproval {
  id: string;
  [key: string]: any;
}

// API Request/Response Types
export interface ConfigureCostAllocationRequest extends CreateRequest<CostAllocationConfiguration> {
  flowId: string;
  data: CostAllocationConfiguration;
  allocationMethod: 'direct' | 'proportional' | 'activity_based' | 'shared_services';
  allocationRules: AllocationRule[];
  costPools: CostPool[];
  chargebackModel: ChargebackModel;
}

export interface ConfigureCostAllocationResponse extends CreateResponse<CostAllocation> {
  data: CostAllocation;
  allocationId: string;
  validationResults: AllocationValidationResult[];
  scheduleEnabled: boolean;
  reportingEnabled: boolean;
}

export interface ExecuteCostAllocationRequest extends BaseApiRequest {
  allocationId: string;
  period: {
    start: string;
    end: string;
  };
  dryRun?: boolean;
  includeApprovals?: boolean;
  context: MultiTenantContext;
}

export interface ExecuteCostAllocationResponse extends BaseApiResponse<CostAllocationExecution> {
  data: CostAllocationExecution;
  executionId: string;
  allocatedCosts: AllocatedCost[];
  chargebacks: Chargeback[];
  approvals: AllocationApproval[];
}

// Core Configuration Types
export interface CostAllocationConfiguration {
  id: string;
  flowId: string;
  name: string;
  description: string;
  allocationMethod: string;
  scope: AllocationScope;
  rules: AllocationRule[];
  costPools: CostPool[];
  chargebackModel: ChargebackModel;
  schedule: AllocationSchedule;
  reporting: AllocationReporting;
  approvals: AllocationApprovalConfig;
  metadata: Record<string, any>;
}

export interface CostAllocation extends CostAllocationConfiguration {
  allocationId: string;
  status: 'draft' | 'active' | 'inactive' | 'suspended' | 'archived';
  validation: AllocationValidation;
  executionHistory: AllocationExecutionSummary[];
  performance: AllocationPerformance;
  createdAt: string;
  updatedAt: string;
  createdBy: string;
  lastModifiedBy: string;
}

// Scope and Filter Types
export interface AllocationScope {
  accounts: string[];
  services: string[];
  resources: string[];
  regions: string[];
  costCenters: string[];
  projects: string[];
  environments: string[];
  timeRange: {
    start: string;
    end: string;
  };
  filters: AllocationFilter[];
  exclusions: AllocationExclusion[];
}

export interface AllocationFilter {
  dimension: string;
  operator: 'equals' | 'not_equals' | 'contains' | 'in' | 'not_in';
  values: string[];
  description: string;
}

export interface AllocationExclusion {
  type: 'service' | 'resource' | 'account' | 'tag';
  values: string[];
  reason: string;
  temporary: boolean;
  expirationDate?: string;
}