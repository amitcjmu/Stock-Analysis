/**
 * FinOps Monitoring and Observability Types
 * 
 * Monitoring plans, metrics, dashboards, alerting, and logging
 * for FinOps execution workflows.
 * 
 * Generated by CC (Claude Code) - Modularized from execution-types.ts
 */

// Monitoring and Observability Types
export interface MonitoringPlan {
  enabled: boolean;
  scope: MonitoringScope;
  metrics: MonitoringMetric[];
  alerts: MonitoringAlert[];
  dashboards: MonitoringDashboard[];
  logging: LoggingConfiguration;
  reporting: MonitoringReporting;
}

export interface MonitoringScope {
  resources: string[];
  metrics: string[];
  timeRange: {
    start: string;
    end: string;
  };
  granularity: string;
  retention: string;
}

export interface MonitoringMetric {
  name: string;
  type: 'counter' | 'gauge' | 'histogram' | 'summary';
  unit: string;
  collection: MetricCollection;
  thresholds: MetricThreshold[];
  aggregation: MetricAggregation;
}

export interface MetricCollection {
  interval: string;
  method: 'pull' | 'push' | 'stream';
  timeout: string;
  retries: number;
}

export interface MetricThreshold {
  level: 'info' | 'warning' | 'error' | 'critical';
  operator: string;
  value: number;
  duration?: string;
  hysteresis?: number;
}

export interface MetricAggregation {
  function: 'sum' | 'avg' | 'min' | 'max' | 'count' | 'p95' | 'p99';
  interval: string;
  retention: string;
}

// Dashboards and Visualization
export interface MonitoringDashboard {
  id: string;
  name: string;
  description: string;
  panels: DashboardPanel[];
  refresh: string;
  timeRange: string;
  variables: DashboardVariable[];
}

export interface DashboardPanel {
  id: string;
  type: 'graph' | 'table' | 'stat' | 'gauge' | 'heatmap';
  title: string;
  queries: PanelQuery[];
  visualization: PanelVisualization;
  position: PanelPosition;
}

export interface PanelQuery {
  metric: string;
  filters: Record<string, string | number | boolean | null>;
  aggregation: string;
  timeRange?: string;
}

export interface PanelVisualization {
  type: string;
  options: Record<string, string | number | boolean | null>;
  thresholds?: VisualizationThreshold[];
}

export interface VisualizationThreshold {
  value: number;
  color: string;
  operator: string;
}

export interface PanelPosition {
  x: number;
  y: number;
  width: number;
  height: number;
}

export interface DashboardVariable {
  name: string;
  type: 'query' | 'interval' | 'datasource' | 'custom';
  query?: string;
  options?: string[];
  default?: string;
  multi?: boolean;
}

// Alerting System
export interface MonitoringAlert {
  name: string;
  condition: string;
  threshold: number;
  severity: 'info' | 'warning' | 'error' | 'critical';
  recipients: string[];
  actions: string[];
}

// Logging Configuration
export interface LoggingConfiguration {
  enabled: boolean;
  level: 'debug' | 'info' | 'warn' | 'error';
  destinations: LoggingDestination[];
  format: string;
  retention: string;
  sampling?: LoggingSampling;
}

export interface LoggingDestination {
  type: 'file' | 'console' | 'syslog' | 'elasticsearch' | 'cloudwatch';
  configuration: Record<string, string | number | boolean | null>;
  filters: LoggingFilter[];
}

export interface LoggingFilter {
  field: string;
  operator: string;
  value: unknown;
  action: 'include' | 'exclude';
}

export interface LoggingSampling {
  rate: number;
  strategy: 'random' | 'deterministic';
  preserveErrors: boolean;
}

// Reporting
export interface MonitoringReporting {
  frequency: string;
  recipients: string[];
  format: 'email' | 'slack' | 'webhook';
  content: ReportContent[];
  conditions: ReportCondition[];
}

export interface ReportContent {
  type: 'summary' | 'metrics' | 'alerts' | 'trends';
  configuration: Record<string, string | number | boolean | null>;
}

export interface ReportCondition {
  metric: string;
  operator: string;
  value: unknown;
  action: 'include' | 'highlight' | 'escalate';
}
