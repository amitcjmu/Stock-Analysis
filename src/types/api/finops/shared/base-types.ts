/**
 * FinOps Shared Base Types
 * 
 * Common type definitions shared across all FinOps modules.
 * Provides foundational interfaces for cost analysis, resource management, 
 * optimization strategies, and compliance frameworks.
 * 
 * Generated by CC (Claude Code) - FinOps Type Modularization
 */

import type { BaseMetadata } from '../../../shared/metadata-types';
import type { CostAmount } from '../cost-analysis';
import type { ConfigurationValue, TypedConstraint } from '../../../shared/config-types';

// Base FinOps Interfaces
export interface FinOpsResource {
  resourceId: string;
  name: string;
  type: ResourceType;
  cost: CostAmount;
  tags: Record<string, string>;
  metadata: BaseMetadata;
}

export interface ResourceType {
  type: 'compute' | 'storage' | 'network' | 'database' | 'container' | 'serverless';
  subType?: string;
  provider: string;
  region?: string;
  family?: string;
}

export interface FinOpsScope {
  accounts: string[];
  services: string[];
  resources: string[];
  regions: string[];
  projects: string[];
  environments: string[];
  costCenters?: string[];
  businessUnits?: string[];
  tags: Record<string, string>;
  exclusions?: string[];
}

export interface TimeRange {
  start: string;
  end: string;
}

// Optimization Base Types
export interface OptimizationTarget {
  type: 'cost_reduction' | 'efficiency_improvement' | 'performance_optimization';
  value: number;
  unit: string;
  timeframe: string;
  priority: number;
}

export interface OptimizationConstraint extends Omit<TypedConstraint, 'type' | 'impact'> {
  type: 'performance' | 'availability' | 'security' | 'compliance' | 'operational';
  operator: string;
  mandatory: boolean;
  exceptions?: string[];
}

export interface OptimizationStrategy {
  objective: 'cost' | 'performance' | 'balanced' | 'sustainability';
  approach: 'conservative' | 'moderate' | 'aggressive';
  constraints: OptimizationConstraint[];
  priorities: OptimizationPriority[];
  timeframe: string;
}

export interface OptimizationPriority {
  dimension: string;
  weight: number;
  direction: 'minimize' | 'maximize';
}

// Risk Assessment Base Types
export interface RiskAssessment {
  overallRisk: 'low' | 'medium' | 'high' | 'critical';
  risks: Risk[];
  mitigations: Mitigation[];
}

export interface Risk {
  type: 'performance' | 'availability' | 'cost' | 'operational' | 'security';
  description: string;
  likelihood: 'low' | 'medium' | 'high';
  impact: 'low' | 'medium' | 'high';
}

export interface Mitigation {
  risk: string;
  strategy: string;
  cost: CostAmount;
  effectiveness: number;
  timeline?: string;
}

// Performance Metrics Base Types
export interface PerformanceMetric {
  name: string;
  current: number;
  baseline: number;
  target: number;
  unit: string;
  trend: 'improving' | 'degrading' | 'stable';
  status: 'meeting' | 'below' | 'above' | 'unknown';
}

export interface PerformanceRequirement {
  metric: string;
  minimum: number;
  target: number;
  unit: string;
  critical: boolean;
}

// Validation Base Types
export interface ValidationResult {
  check: string;
  status: 'passed' | 'failed' | 'warning';
  details: string;
  timestamp: string;
}

export interface ValidationCheck {
  id: string;
  name: string;
  type: 'pre' | 'post' | 'continuous';
  criteria: string[];
  automated: boolean;
  frequency?: string;
}

// Implementation Base Types
export interface ImplementationPhase {
  id: string;
  name: string;
  description: string;
  tasks: ImplementationTask[];
  duration: string;
  prerequisites: string[];
  deliverables: string[];
}

export interface ImplementationTask {
  id: string;
  name: string;
  type: 'automated' | 'manual' | 'approval';
  description: string;
  assignee: string;
  duration: string;
  dependencies: string[];
  validation: string[];
}

export interface Dependency {
  id: string;
  type: 'resource' | 'approval' | 'external';
  description: string;
  status: 'pending' | 'available' | 'blocked';
}

// Monitoring and Alerting Base Types
export interface MonitoringAlert {
  metric: string;
  condition: string;
  threshold: ConfigurationValue;
  severity: 'info' | 'warning' | 'error' | 'critical';
  actions: string[];
}

export interface AlertingConfig {
  enabled: boolean;
  thresholds: AlertThreshold[];
  channels: NotificationChannel[];
  escalation: EscalationRule[];
}

export interface AlertThreshold {
  metric: string;
  operator: string;
  value: number;
  severity: 'info' | 'warning' | 'error' | 'critical';
}

export interface NotificationChannel {
  type: 'email' | 'slack' | 'webhook' | 'sms';
  configuration: BaseMetadata;
  enabled: boolean;
}

export interface EscalationRule {
  trigger: string;
  escalateTo: string[];
  timeout: string;
  actions: string[];
}

// Compliance Base Types
export interface ComplianceFramework {
  id: string;
  name: string;
  version: string;
  standards: ComplianceStandard[];
  requirements: ComplianceRequirement[];
}

export interface ComplianceStandard {
  id: string;
  name: string;
  description: string;
  controls: ComplianceControl[];
}

export interface ComplianceControl {
  id: string;
  name: string;
  description: string;
  requirements: string[];
  automated: boolean;
}

export interface ComplianceRequirement {
  id: string;
  description: string;
  mandatory: boolean;
  category: string;
  validationCriteria: string[];
}

// Cost Threshold Base Types
export interface CostThreshold {
  type: 'absolute' | 'percentage';
  value: number;
  description: string;
  enforcement: 'hard' | 'soft';
}

export interface BudgetAlert {
  threshold: number;
  type: 'percentage' | 'absolute';
  recipients: string[];
  message: string;
  escalation?: EscalationRule;
}

// Forecasting Base Types
export interface ForecastConfiguration {
  method: 'linear' | 'exponential' | 'arima' | 'ml_ensemble';
  horizon: string;
  confidence: number;
  seasonalityDetection: boolean;
  anomalyAdjustment: boolean;
}

export interface ForecastResult {
  period: string;
  value: number;
  confidence: ForecastConfidence;
  factors: string[];
}

export interface ForecastConfidence {
  level: number;
  upperBound: number;
  lowerBound: number;
  interval: string;
}

// Reporting Base Types
export interface ReportConfiguration {
  template: string;
  format: 'pdf' | 'html' | 'docx' | 'xlsx' | 'json';
  sections: string[];
  customizations: ReportCustomization;
  distribution: ReportDistribution;
}

export interface ReportCustomization {
  branding: BrandingCustomization;
  content: ContentCustomization;
  format: FormatCustomization;
}

export interface BrandingCustomization {
  logo: string;
  colors: Record<string, string>;
  fonts: Record<string, string>;
  watermark?: string;
}

export interface ContentCustomization {
  sections: string[];
  metrics: string[];
  filters: BaseMetadata;
  aggregations: BaseMetadata;
}

export interface FormatCustomization {
  layout: string;
  pageSize: string;
  orientation: 'portrait' | 'landscape';
  charts?: ChartCustomization[];
}

export interface ChartCustomization {
  type: string;
  configuration: BaseMetadata;
  position: string;
  size: string;
}

export interface ReportDistribution {
  method: 'download' | 'email' | 'portal' | 'api';
  recipients: ReportRecipient[];
  schedule?: ReportSchedule;
  access: ReportAccess;
}

export interface ReportRecipient {
  type: 'user' | 'group' | 'role' | 'external';
  identifier: string;
  format: string[];
  customizations?: BaseMetadata;
}

export interface ReportSchedule {
  frequency: 'once' | 'daily' | 'weekly' | 'monthly' | 'quarterly';
  time: string;
  timezone: string;
  enabled: boolean;
}

export interface ReportAccess {
  level: 'public' | 'internal' | 'restricted' | 'confidential';
  permissions: string[];
  expiration?: string;
  watermark?: boolean;
}

// Execution Status Types
export type ExecutionStatus = 
  | 'pending' | 'running' | 'completed' | 'failed' 
  | 'cancelled' | 'paused' | 'retrying';

export type OptimizationStatus = 
  | 'identified' | 'planned' | 'approved' | 'implementing' 
  | 'monitoring' | 'completed' | 'failed' | 'rolled_back';

export type ValidationStatus = 'passed' | 'failed' | 'warning' | 'skipped';

export type RiskLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high' | 'critical';

export type ConfidenceLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high';

export type ComplexityLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high' | 'extreme';

export type EffortLevel = 'minimal' | 'low' | 'medium' | 'high' | 'very_high';

export type ImpactLevel = 'none' | 'minimal' | 'moderate' | 'significant' | 'major';

export type PriorityLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high' | 'critical';

export type TrendDirection = 'increasing' | 'decreasing' | 'stable' | 'volatile' | 'cyclical';

// Utility Types
export interface KeyValuePair<T = ConfigurationValue> {
  key: string;
  value: T;
}

export interface NamedValue<T = ConfigurationValue> {
  name: string;
  value: T;
  unit?: string;
  description?: string;
}

export interface TimestampedValue<T = ConfigurationValue> {
  timestamp: string;
  value: T;
}

export interface WeightedValue<T = ConfigurationValue> {
  value: T;
  weight: number;
}

export interface VersionedData<T = ConfigurationValue> {
  version: string;
  data: T;
  createdAt: string;
  createdBy: string;
}