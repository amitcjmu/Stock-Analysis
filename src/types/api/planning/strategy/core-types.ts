/**
 * Migration Strategy Core Types
 * 
 * Core migration strategy data structures, APIs, and fundamental interfaces.
 * 
 * Generated by CC - Claude Code
 */

import type { BaseMetadata, AuditableMetadata } from '../../../shared/metadata-types';
import type {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext,
  CreateRequest,
  CreateResponse,
  GetRequest,
  GetResponse
} from '../../shared';
import type { ConfigurationValue, TypedConstraint } from '../../../shared/config-types';
import type { AnalysisResult, CostAnalysis, RiskAnalysis } from '../../../shared/analysis-types';

// Migration Strategy APIs
export interface CreateMigrationStrategyRequest extends CreateRequest<MigrationStrategyData> {
  flowId: string;
  data: MigrationStrategyData;
  assessmentInputs: AssessmentInput[];
  businessDrivers: BusinessDriver[];
  constraints: StrategyConstraint[];
  successCriteria: SuccessCriteria[];
  generateAlternatives?: boolean;
  includeRiskAnalysis?: boolean;
  includeCostAnalysis?: boolean;
}

export interface CreateMigrationStrategyResponse extends CreateResponse<MigrationStrategyResult> {
  data: MigrationStrategyResult;
  strategyId: string;
  alternatives: MigrationAlternative[];
  riskAnalysis?: StrategyRiskAnalysis;
  costAnalysis?: StrategyCostAnalysis;
  feasibilityAssessment: FeasibilityAssessment;
}

export interface GetMigrationStrategyRequest extends GetRequest {
  strategyId: string;
  includeDetails?: boolean;
  includeAlternatives?: boolean;
  includeAnalysis?: boolean;
  includeComparison?: boolean;
}

export interface GetMigrationStrategyResponse extends GetResponse<MigrationStrategyResult> {
  data: MigrationStrategyResult;
  detailedAnalysis: StrategyAnalysis;
  comparisonMatrix?: StrategyComparison;
  recommendations: StrategyRecommendation[];
}

// Core Data Types
export interface MigrationStrategyData {
  id: string;
  name: string;
  description: string;
  strategyType: 'lift_and_shift' | 'refactor' | 'rearchitect' | 'rebuild' | 'replace' | 'hybrid';
  approach: 'big_bang' | 'phased' | 'parallel' | 'pilot';
  scope: StrategyScope;
  timeline: StrategyTimeline;
  resources: StrategyResources;
  technology: TechnologyStrategy;
  businessCase: BusinessCase;
  dependencies: StrategyDependency[];
  assumptions: StrategyAssumption[];
  constraints: StrategyConstraint[];
  metadata: AuditableMetadata;
}

export interface MigrationStrategyResult {
  id: string;
  strategyData: MigrationStrategyData;
  feasibilityScore: number;
  riskScore: number;
  costEstimate: number;
  timelineEstimate: number;
  confidenceLevel: number;
  alternatives: MigrationAlternative[];
  recommendations: string[];
  nextSteps: string[];
  approvalRequired: boolean;
}

export interface MigrationAlternative {
  id: string;
  name: string;
  description: string;
  strategyType: string;
  approach: string;
  advantages: string[];
  disadvantages: string[];
  feasibilityScore: number;
  riskScore: number;
  costEstimate: number;
  timelineEstimate: number;
  effort: 'low' | 'medium' | 'high' | 'very_high';
  complexity: 'low' | 'medium' | 'high' | 'very_high';
  recommendation: 'recommended' | 'viable' | 'not_recommended';
}

export interface StrategyScope {
  applications: ApplicationScope[];
  infrastructure: InfrastructureScope[];
  data: DataScope[];
  integrations: IntegrationScope[];
  security: SecurityScope;
  compliance: ComplianceScope;
  geography: string[];
  businessUnits: string[];
}

export interface StrategyTimeline {
  phases: StrategyPhase[];
  milestones: StrategyMilestone[];
  dependencies: PhaseDependency[];
  criticalPath: string[];
  bufferTime: number;
  totalDuration: number;
}

export interface StrategyResources {
  teams: TeamRequirement[];
  skills: SkillRequirement[];
  tools: ToolRequirement[];
  infrastructure: InfrastructureRequirement[];
  budget: BudgetRequirement;
  vendors: VendorRequirement[];
}

export interface TechnologyStrategy {
  targetPlatform: string;
  architecture: ArchitectureStrategy;
  frameworks: FrameworkStrategy[];
  databases: DatabaseStrategy[];
  integration: IntegrationStrategy;
  security: SecurityStrategy;
  monitoring: MonitoringStrategy;
  deployment: DeploymentStrategy;
}

// Supporting Types
export interface ApplicationScope {
  applicationId: string;
  name: string;
  migrationApproach: string;
  priority: number;
  complexity: string;
  dependencies: string[];
}

export interface InfrastructureScope {
  componentId: string;
  name: string;
  type: string;
  migrationApproach: string;
  dependencies: string[];
}

export interface DataScope {
  datasetId: string;
  name: string;
  type: string;
  size: number;
  migrationApproach: string;
  sensitivity: string;
}

export interface IntegrationScope {
  integrationId: string;
  name: string;
  type: string;
  systems: string[];
  approach: string;
}

export interface SecurityScope {
  requirements: SecurityRequirement[];
  compliance: ComplianceRequirement[];
  risks: SecurityRisk[];
  controls: SecurityControl[];
}

export interface ComplianceScope {
  frameworks: ComplianceFramework[];
  requirements: ComplianceRequirement[];
  audits: ComplianceAudit[];
  certifications: Certification[];
}

export interface StrategyPhase {
  id: string;
  name: string;
  description: string;
  duration: number;
  startDate?: string;
  endDate?: string;
  deliverables: string[];
  dependencies: string[];
  resources: PhaseResource[];
}

export interface StrategyMilestone {
  id: string;
  name: string;
  description: string;
  date: string;
  type: 'delivery' | 'decision' | 'approval' | 'checkpoint';
  criteria: string[];
  dependencies: string[];
}

export interface PhaseDependency {
  id: string;
  predecessorPhase: string;
  successorPhase: string;
  type: 'finish_to_start' | 'start_to_start' | 'finish_to_finish' | 'start_to_finish';
  lag: number;
}

export interface StrategyConstraint extends Omit<TypedConstraint, 'type'> {
  id: string;
  type: 'time' | 'budget' | 'resource' | 'technical' | 'regulatory' | 'business' | 'security';
  flexibility: 'fixed' | 'flexible' | 'negotiable';
  mitigation?: string;
}

export interface StrategyDependency {
  id: string;
  type: string;
  description: string;
  impact: string;
}

export interface StrategyAssumption {
  id: string;
  description: string;
  confidence: number;
  impact: string;
}

// Forward declarations for types defined in other modules
export interface AssessmentInput {
  id: string;
  type: 'application' | 'infrastructure' | 'data' | 'process' | 'business';
  source: string;
  data: BaseMetadata;
  confidence: number;
  timestamp: string;
  validator?: string;
}

export interface BusinessDriver {
  id: string;
  name: string;
  description: string;
  category: 'cost_reduction' | 'agility' | 'scalability' | 'innovation' | 'compliance' | 'risk_mitigation';
  priority: 'low' | 'medium' | 'high' | 'critical';
  impact: 'low' | 'medium' | 'high' | 'very_high';
  urgency: 'low' | 'medium' | 'high' | 'immediate';
  measurable: boolean;
  metrics: ConfigurationValue[];
}

export interface SuccessCriteria {
  id: string;
  name: string;
  description: string;
  category: string;
  measurable: boolean;
  metrics: ConfigurationValue[];
  targetValue: ConfigurationValue;
  minimumAcceptable: ConfigurationValue;
  weight: number;
}

export interface BusinessCase {
  objectives: BusinessObjective[];
  benefits: BusinessBenefit[];
  costs: BusinessCost[];
  risks: BusinessRisk[];
  roi: ReturnOnInvestment;
  paybackPeriod: number;
  npv: number;
  irr: number;
  breakEvenPoint: number;
}

// These will be fully defined in other modules
export interface StrategyRiskAnalysis extends RiskAnalysis {
  risks: StrategyRisk[];
  riskScore: number;
  riskLevel: 'low' | 'medium' | 'high' | 'critical';
  mitigationStrategies: MitigationStrategy[];
  contingencyPlans: ContingencyPlan[];
  probabilityOfSuccess: number;
}

export interface StrategyCostAnalysis extends CostAnalysis {
  totalCost: number;
  costBreakdown: CostBreakdownDetail[];
  costVariances: CostVariance[];
  costSensitivity: CostSensitivityItem[];
  fundingOptions: FundingOption[];
  paymentSchedule: PaymentScheduleItem[];
}

export interface FeasibilityAssessment {
  overallFeasibility: 'high' | 'medium' | 'low' | 'not_feasible';
  technicalFeasibility: FeasibilityDimension;
  businessFeasibility: FeasibilityDimension;
  operationalFeasibility: FeasibilityDimension;
  resourceFeasibility: FeasibilityDimension;
  constraints: FeasibilityConstraint[];
  recommendations: FeasibilityRecommendation[];
}

export interface StrategyAnalysis {
  strengthsWeaknessesOpportunitiesThreats: SwotAnalysis;
  competitiveAnalysis: CompetitiveAnalysis;
  stakeholderAnalysis: StakeholderAnalysis;
  impactAnalysis: ImpactAnalysis;
  sensitivityAnalysis: SensitivityAnalysis;
  scenarioAnalysis: ScenarioAnalysis;
}

export interface StrategyComparison {
  strategies: string[];
  criteria: ComparisonCriteria[];
  comparisonMatrix: ComparisonMatrix;
  rankings: StrategyRanking[];
  recommendations: ComparisonRecommendation[];
  decisionTree: DecisionNode[];
}

export interface StrategyRecommendation {
  id: string;
  title: string;
  description: string;
  category: string;
  priority: 'low' | 'medium' | 'high' | 'critical';
  rationale: string;
  benefits: string[];
  risks: string[];
  effort: string;
  timeline: string;
  dependencies: string[];
}

// Additional supporting interfaces for replaced any types

export interface TeamRequirement {
  role: string;
  skillLevel: string;
  count: number;
  duration: number;
  cost: number;
}

export interface SkillRequirement {
  skill: string;
  level: 'basic' | 'intermediate' | 'advanced' | 'expert';
  priority: 'low' | 'medium' | 'high' | 'critical';
  availability: string;
}

export interface ToolRequirement {
  name: string;
  type: string;
  version?: string;
  licenses: number;
  cost: number;
}

export interface InfrastructureRequirement {
  type: string;
  specification: string;
  quantity: number;
  cost: number;
  duration: number;
}

export interface BudgetRequirement {
  total: number;
  breakdown: BudgetBreakdown[];
  contingency: number;
  approval: string;
}

export interface BudgetBreakdown {
  category: string;
  amount: number;
  percentage: number;
  justification: string;
}

export interface VendorRequirement {
  service: string;
  vendor?: string;
  cost: number;
  duration: number;
  sla?: string;
}

export interface ArchitectureStrategy {
  pattern: string;
  style: string;
  principles: string[];
  constraints: string[];
  decisions: ArchitectureDecision[];
}

export interface ArchitectureDecision {
  id: string;
  decision: string;
  rationale: string;
  alternatives: string[];
  impact: string;
}

export interface FrameworkStrategy {
  name: string;
  version: string;
  purpose: string;
  migration: string;
}

export interface DatabaseStrategy {
  type: string;
  product: string;
  version: string;
  migration: string;
  dataVolume: number;
}

export interface IntegrationStrategy {
  approach: string;
  patterns: string[];
  protocols: string[];
  security: string;
}

export interface SecurityStrategy {
  framework: string;
  controls: string[];
  encryption: string;
  authentication: string;
  authorization: string;
}

export interface MonitoringStrategy {
  tools: string[];
  metrics: string[];
  alerting: string;
  reporting: string;
}

export interface DeploymentStrategy {
  approach: string;
  environments: string[];
  automation: string;
  rollback: string;
}

export interface SecurityRequirement {
  id: string;
  category: string;
  requirement: string;
  priority: string;
}

export interface ComplianceRequirement {
  id: string;
  framework: string;
  requirement: string;
  evidence: string;
}

export interface SecurityRisk {
  id: string;
  threat: string;
  vulnerability: string;
  impact: string;
  likelihood: string;
}

export interface SecurityControl {
  id: string;
  type: string;
  description: string;
  effectiveness: string;
}

export interface ComplianceFramework {
  name: string;
  version: string;
  applicability: string;
  requirements: number;
}

export interface ComplianceAudit {
  id: string;
  date: string;
  scope: string;
  findings: number;
  status: string;
}

export interface Certification {
  name: string;
  issuer: string;
  validUntil: string;
  scope: string;
}

export interface PhaseResource {
  resourceId: string;
  allocation: number;
  role: string;
  cost: number;
}

export interface BusinessObjective {
  id: string;
  objective: string;
  measurable: boolean;
  metrics: ConfigurationValue[];
  target: ConfigurationValue;
  priority: string;
}

export interface BusinessBenefit {
  id: string;
  type: 'tangible' | 'intangible';
  description: string;
  value: number;
  timeframe: string;
  confidence: number;
}

export interface BusinessCost {
  id: string;
  category: string;
  description: string;
  amount: number;
  timing: string;
  type: 'capex' | 'opex';
}

export interface BusinessRisk {
  id: string;
  description: string;
  impact: number;
  probability: number;
  mitigation: string;
  owner: string;
}

export interface ReturnOnInvestment {
  percentage: number;
  timeframe: string;
  assumptions: string[];
  sensitivity: string[];
}

export interface StrategyRisk {
  id: string;
  category: string;
  description: string;
  impact: 'low' | 'medium' | 'high' | 'critical';
  probability: number;
  score: number;
  owner: string;
}

export interface MitigationStrategy {
  riskId: string;
  strategy: string;
  actions: string[];
  cost: number;
  effectiveness: string;
}

export interface ContingencyPlan {
  riskId: string;
  trigger: string;
  actions: string[];
  cost: number;
  timeline: string;
}

export interface CostBreakdownDetail {
  category: string;
  subcategory?: string;
  amount: number;
  percentage: number;
  timing: string;
  confidence: number;
}

export interface CostVariance {
  category: string;
  baseline: number;
  current: number;
  variance: number;
  reason: string;
}

export interface CostSensitivityItem {
  factor: string;
  impact: number;
  range: { min: number; max: number };
  probability: string;
}

export interface FundingOption {
  source: string;
  type: string;
  amount: number;
  terms: string;
  availability: string;
}

export interface PaymentScheduleItem {
  milestone: string;
  amount: number;
  date: string;
  conditions: string[];
}

export interface FeasibilityDimension {
  score: number;
  assessment: 'high' | 'medium' | 'low' | 'not_feasible';
  factors: FeasibilityFactor[];
  risks: string[];
  recommendations: string[];
}

export interface FeasibilityFactor {
  factor: string;
  rating: number;
  weight: number;
  rationale: string;
}

export interface FeasibilityConstraint {
  type: string;
  description: string;
  impact: string;
  mitigation?: string;
}

export interface FeasibilityRecommendation {
  area: string;
  recommendation: string;
  priority: string;
  effort: string;
}

export interface SwotAnalysis {
  strengths: SwotItem[];
  weaknesses: SwotItem[];
  opportunities: SwotItem[];
  threats: SwotItem[];
}

export interface SwotItem {
  item: string;
  impact: string;
  evidence: string;
  actions: string[];
}

export interface CompetitiveAnalysis {
  competitors: Competitor[];
  positioning: MarketPosition;
  advantages: string[];
  disadvantages: string[];
}

export interface Competitor {
  name: string;
  strengths: string[];
  weaknesses: string[];
  marketShare: number;
}

export interface MarketPosition {
  current: string;
  target: string;
  strategy: string;
  timeline: string;
}

export interface StakeholderAnalysis {
  stakeholders: Stakeholder[];
  influenceMatrix: InfluenceMatrix;
  engagementPlan: EngagementPlan;
}

export interface Stakeholder {
  id: string;
  name: string;
  role: string;
  influence: 'low' | 'medium' | 'high';
  interest: 'low' | 'medium' | 'high';
  position: 'champion' | 'supporter' | 'neutral' | 'skeptic' | 'opponent';
}

export interface InfluenceMatrix {
  highInfluenceHighInterest: string[];
  highInfluenceLowInterest: string[];
  lowInfluenceHighInterest: string[];
  lowInfluenceLowInterest: string[];
}

export interface EngagementPlan {
  strategies: EngagementStrategy[];
  communication: CommunicationPlan;
  risks: string[];
}

export interface EngagementStrategy {
  stakeholderId: string;
  approach: string;
  frequency: string;
  owner: string;
}

export interface CommunicationPlan {
  channels: string[];
  frequency: string;
  messages: string[];
  feedback: string;
}

export interface ImpactAnalysis extends AnalysisResult {
  businessImpact: BusinessImpact;
  technicalImpact: TechnicalImpact;
  organizationalImpact: OrganizationalImpact;
  timeline: string;
}

export interface BusinessImpact {
  processes: string[];
  revenue: number;
  costs: number;
  customers: number;
  reputation: string;
}

export interface TechnicalImpact {
  systems: string[];
  integrations: string[];
  data: string[];
  infrastructure: string[];
  complexity: string;
}

export interface OrganizationalImpact {
  departments: string[];
  roles: string[];
  headcount: number;
  training: string;
  culture: string;
}

export interface SensitivityAnalysis {
  variables: SensitivityVariable[];
  scenarios: SensitivityScenario[];
  results: SensitivityResult[];
}

export interface SensitivityVariable {
  name: string;
  baseline: number;
  range: { min: number; max: number };
  unit: string;
}

export interface SensitivityScenario {
  name: string;
  variables: Record<string, number>;
  probability: number;
}

export interface SensitivityResult {
  scenario: string;
  outcome: ConfigurationValue;
  variance: number;
  acceptability: string;
}

export interface ScenarioAnalysis {
  scenarios: Scenario[];
  probabilities: ScenarioProbability[];
  recommendations: string[];
}

export interface Scenario {
  id: string;
  name: string;
  description: string;
  assumptions: string[];
  outcomes: ScenarioOutcome[];
}

export interface ScenarioOutcome {
  metric: string;
  value: ConfigurationValue;
  confidence: number;
}

export interface ScenarioProbability {
  scenarioId: string;
  probability: number;
  rationale: string;
}

export interface ComparisonCriteria {
  id: string;
  name: string;
  weight: number;
  type: 'quantitative' | 'qualitative';
  scale: string;
}

export interface ComparisonMatrix {
  criteria: string[];
  strategies: string[];
  scores: Record<string, Record<string, number>>;
  weightedScores: Record<string, number>;
}

export interface StrategyRanking {
  strategyId: string;
  rank: number;
  score: number;
  strengths: string[];
  weaknesses: string[];
}

export interface ComparisonRecommendation {
  recommendation: string;
  rationale: string;
  confidence: number;
  risks: string[];
}

export interface DecisionNode {
  id: string;
  type: 'decision' | 'chance' | 'terminal';
  description: string;
  options?: DecisionOption[];
  probability?: number;
  value?: number;
}

export interface DecisionOption {
  id: string;
  description: string;
  nextNodeId: string;
  cost?: number;
  probability?: number;
}