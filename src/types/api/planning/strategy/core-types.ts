/**
 * Migration Strategy Core Types
 * 
 * Core migration strategy data structures, APIs, and fundamental interfaces.
 * 
 * Generated by CC - Claude Code
 */

import {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext,
  CreateRequest,
  CreateResponse,
  GetRequest,
  GetResponse
} from '../../shared';

// Migration Strategy APIs
export interface CreateMigrationStrategyRequest extends CreateRequest<MigrationStrategyData> {
  flowId: string;
  data: MigrationStrategyData;
  assessmentInputs: AssessmentInput[];
  businessDrivers: BusinessDriver[];
  constraints: StrategyConstraint[];
  successCriteria: SuccessCriteria[];
  generateAlternatives?: boolean;
  includeRiskAnalysis?: boolean;
  includeCostAnalysis?: boolean;
}

export interface CreateMigrationStrategyResponse extends CreateResponse<MigrationStrategyResult> {
  data: MigrationStrategyResult;
  strategyId: string;
  alternatives: MigrationAlternative[];
  riskAnalysis?: StrategyRiskAnalysis;
  costAnalysis?: StrategyCostAnalysis;
  feasibilityAssessment: FeasibilityAssessment;
}

export interface GetMigrationStrategyRequest extends GetRequest {
  strategyId: string;
  includeDetails?: boolean;
  includeAlternatives?: boolean;
  includeAnalysis?: boolean;
  includeComparison?: boolean;
}

export interface GetMigrationStrategyResponse extends GetResponse<MigrationStrategyResult> {
  data: MigrationStrategyResult;
  detailedAnalysis: StrategyAnalysis;
  comparisonMatrix?: StrategyComparison;
  recommendations: StrategyRecommendation[];
}

// Core Data Types
export interface MigrationStrategyData {
  id: string;
  name: string;
  description: string;
  strategyType: 'lift_and_shift' | 'refactor' | 'rearchitect' | 'rebuild' | 'replace' | 'hybrid';
  approach: 'big_bang' | 'phased' | 'parallel' | 'pilot';
  scope: StrategyScope;
  timeline: StrategyTimeline;
  resources: StrategyResources;
  technology: TechnologyStrategy;
  businessCase: BusinessCase;
  dependencies: StrategyDependency[];
  assumptions: StrategyAssumption[];
  constraints: StrategyConstraint[];
  metadata: Record<string, any>;
}

export interface MigrationStrategyResult {
  id: string;
  strategyData: MigrationStrategyData;
  feasibilityScore: number;
  riskScore: number;
  costEstimate: number;
  timelineEstimate: number;
  confidenceLevel: number;
  alternatives: MigrationAlternative[];
  recommendations: string[];
  nextSteps: string[];
  approvalRequired: boolean;
}

export interface MigrationAlternative {
  id: string;
  name: string;
  description: string;
  strategyType: string;
  approach: string;
  advantages: string[];
  disadvantages: string[];
  feasibilityScore: number;
  riskScore: number;
  costEstimate: number;
  timelineEstimate: number;
  effort: 'low' | 'medium' | 'high' | 'very_high';
  complexity: 'low' | 'medium' | 'high' | 'very_high';
  recommendation: 'recommended' | 'viable' | 'not_recommended';
}

export interface StrategyScope {
  applications: ApplicationScope[];
  infrastructure: InfrastructureScope[];
  data: DataScope[];
  integrations: IntegrationScope[];
  security: SecurityScope;
  compliance: ComplianceScope;
  geography: string[];
  businessUnits: string[];
}

export interface StrategyTimeline {
  phases: StrategyPhase[];
  milestones: StrategyMilestone[];
  dependencies: PhaseDependency[];
  criticalPath: string[];
  bufferTime: number;
  totalDuration: number;
}

export interface StrategyResources {
  teams: TeamRequirement[];
  skills: SkillRequirement[];
  tools: ToolRequirement[];
  infrastructure: InfrastructureRequirement[];
  budget: BudgetRequirement;
  vendors: VendorRequirement[];
}

export interface TechnologyStrategy {
  targetPlatform: string;
  architecture: ArchitectureStrategy;
  frameworks: FrameworkStrategy[];
  databases: DatabaseStrategy[];
  integration: IntegrationStrategy;
  security: SecurityStrategy;
  monitoring: MonitoringStrategy;
  deployment: DeploymentStrategy;
}

// Supporting Types
export interface ApplicationScope {
  applicationId: string;
  name: string;
  migrationApproach: string;
  priority: number;
  complexity: string;
  dependencies: string[];
}

export interface InfrastructureScope {
  componentId: string;
  name: string;
  type: string;
  migrationApproach: string;
  dependencies: string[];
}

export interface DataScope {
  datasetId: string;
  name: string;
  type: string;
  size: number;
  migrationApproach: string;
  sensitivity: string;
}

export interface IntegrationScope {
  integrationId: string;
  name: string;
  type: string;
  systems: string[];
  approach: string;
}

export interface SecurityScope {
  requirements: SecurityRequirement[];
  compliance: ComplianceRequirement[];
  risks: SecurityRisk[];
  controls: SecurityControl[];
}

export interface ComplianceScope {
  frameworks: ComplianceFramework[];
  requirements: ComplianceRequirement[];
  audits: ComplianceAudit[];
  certifications: Certification[];
}

export interface StrategyPhase {
  id: string;
  name: string;
  description: string;
  duration: number;
  startDate?: string;
  endDate?: string;
  deliverables: string[];
  dependencies: string[];
  resources: PhaseResource[];
}

export interface StrategyMilestone {
  id: string;
  name: string;
  description: string;
  date: string;
  type: 'delivery' | 'decision' | 'approval' | 'checkpoint';
  criteria: string[];
  dependencies: string[];
}

export interface PhaseDependency {
  id: string;
  predecessorPhase: string;
  successorPhase: string;
  type: 'finish_to_start' | 'start_to_start' | 'finish_to_finish' | 'start_to_finish';
  lag: number;
}

export interface StrategyConstraint {
  id: string;
  type: 'time' | 'budget' | 'resource' | 'technical' | 'regulatory' | 'business' | 'security';
  description: string;
  value: any;
  flexibility: 'fixed' | 'flexible' | 'negotiable';
  impact: 'low' | 'medium' | 'high' | 'critical';
  mitigation?: string;
}

export interface StrategyDependency {
  id: string;
  type: string;
  description: string;
  impact: string;
}

export interface StrategyAssumption {
  id: string;
  description: string;
  confidence: number;
  impact: string;
}

// Forward declarations for types defined in other modules
export interface AssessmentInput {
  id: string;
  type: 'application' | 'infrastructure' | 'data' | 'process' | 'business';
  source: string;
  data: Record<string, any>;
  confidence: number;
  timestamp: string;
  validator?: string;
}

export interface BusinessDriver {
  id: string;
  name: string;
  description: string;
  category: 'cost_reduction' | 'agility' | 'scalability' | 'innovation' | 'compliance' | 'risk_mitigation';
  priority: 'low' | 'medium' | 'high' | 'critical';
  impact: 'low' | 'medium' | 'high' | 'very_high';
  urgency: 'low' | 'medium' | 'high' | 'immediate';
  measurable: boolean;
  metrics: any[];
}

export interface SuccessCriteria {
  id: string;
  name: string;
  description: string;
  category: string;
  measurable: boolean;
  metrics: any[];
  targetValue: any;
  minimumAcceptable: any;
  weight: number;
}

export interface BusinessCase {
  objectives: any[];
  benefits: any[];
  costs: any[];
  risks: any[];
  roi: any;
  paybackPeriod: number;
  npv: number;
  irr: number;
  breakEvenPoint: number;
}

// These will be fully defined in other modules
export interface StrategyRiskAnalysis {
  risks: any[];
  riskScore: number;
  riskLevel: 'low' | 'medium' | 'high' | 'critical';
  mitigationStrategies: any[];
  contingencyPlans: any[];
  probabilityOfSuccess: number;
}

export interface StrategyCostAnalysis {
  totalCost: number;
  costBreakdown: any[];
  costVariances: any[];
  costSensitivity: any[];
  fundingOptions: any[];
  paymentSchedule: any[];
}

export interface FeasibilityAssessment {
  overallFeasibility: 'high' | 'medium' | 'low' | 'not_feasible';
  technicalFeasibility: any;
  businessFeasibility: any;
  operationalFeasibility: any;
  resourceFeasibility: any;
  constraints: any[];
  recommendations: any[];
}

export interface StrategyAnalysis {
  strengthsWeaknessesOpportunitiesThreats: any;
  competitiveAnalysis: any;
  stakeholderAnalysis: any;
  impactAnalysis: any;
  sensitivityAnalysis: any;
  scenarioAnalysis: any;
}

export interface StrategyComparison {
  strategies: string[];
  criteria: any[];
  comparisonMatrix: any;
  rankings: any[];
  recommendations: any[];
  decisionTree: any[];
}

export interface StrategyRecommendation {
  id: string;
  title: string;
  description: string;
  category: string;
  priority: 'low' | 'medium' | 'high' | 'critical';
  rationale: string;
  benefits: string[];
  risks: string[];
  effort: string;
  timeline: string;
  dependencies: string[];
}