/**
 * Cost Estimation and Analysis Types
 *
 * Types for cost estimation, breakdown analysis, and benchmarking.
 * Includes confidence metrics, accuracy assessments, and comparison structures.
 *
 * Generated by CC - Claude Code
 */

// Forward declarations for types from other modules
export type SensitivityRecommendation = Record<string, unknown>;
export type BenchmarkInsight = Record<string, unknown>;
export type BenchmarkRecommendation = Record<string, unknown>;

// Estimation and Analysis Types
export interface CostEstimate {
  baseEstimate: number;
  contingency: number;
  escalation: number;
  riskAdjustment: number;
  totalEstimate: number;
  confidence: EstimateConfidence;
  accuracy: EstimateAccuracy;
  range: EstimateRange;
  methodology: string;
  assumptions: string[];
}

export interface CostBreakdown {
  byCategory: CategoryBreakdown[];
  byPhase: PhaseBreakdown[];
  byWorkstream: WorkstreamBreakdown[];
  byResource: ResourceBreakdown[];
  byLocation: LocationBreakdown[];
  byTime: TimeBreakdown[];
}

export interface DetailedCostBreakdown {
  structure: BreakdownStructure;
  levels: BreakdownLevel[];
  elements: BreakdownElement[];
  relationships: BreakdownRelationship[];
  aggregation: BreakdownAggregation;
}

export interface CostBenchmark {
  type: 'internal' | 'external' | 'industry' | 'best_practice';
  source: string;
  metric: BenchmarkMetric;
  comparison: BenchmarkComparison;
  variance: BenchmarkVariance;
  insights: BenchmarkInsight[];
  recommendations: BenchmarkRecommendation[];
}

// Estimation Confidence and Accuracy Types
export interface EstimateConfidence {
  level: number;
  range: ConfidenceRange;
  factors: ConfidenceFactor[];
  assessment: string;
}

export interface EstimateAccuracy {
  expected: number;
  historical: number;
  benchmark: number;
  factors: AccuracyFactor[];
}

export interface EstimateRange {
  minimum: number;
  maximum: number;
  mostLikely: number;
  expected: number;
  standardDeviation: number;
}

// Breakdown Types
export interface CategoryBreakdown {
  category: string;
  amount: number;
  percentage: number;
  variance: number;
  trend: string;
}

export interface PhaseBreakdown {
  phase: string;
  amount: number;
  percentage: number;
  variance: number;
  status: string;
}

export interface WorkstreamBreakdown {
  workstream: string;
  amount: number;
  percentage: number;
  variance: number;
  progress: number;
}

export interface ResourceBreakdown {
  resource: string;
  amount: number;
  percentage: number;
  utilization: number;
  efficiency: number;
}

export interface LocationBreakdown {
  location: string;
  amount: number;
  percentage: number;
  cost_index: number;
  adjustment: number;
}

export interface TimeBreakdown {
  period: string;
  amount: number;
  cumulative: number;
  budget: number;
  variance: number;
}

// Detailed Breakdown Structure Types
export interface BreakdownStructure {
  levels: number;
  hierarchy: StructureHierarchy[];
  aggregation: AggregationRule[];
  relationships: HierarchyRelationship[];
}

export interface BreakdownLevel {
  level: number;
  name: string;
  elements: number;
  aggregation: string;
  validation: string;
}

export interface BreakdownElement {
  id: string;
  name: string;
  level: number;
  parent: string;
  children: string[];
  cost: number;
  percentage: number;
}

export interface BreakdownRelationship {
  parent: string;
  child: string;
  type: string;
  allocation: number;
  dependency: string;
}

export interface BreakdownAggregation {
  method: string;
  rules: AggregationRule[];
  validation: AggregationValidation;
  rollup: AggregationRollup[];
}

// Benchmark Types
export interface BenchmarkMetric {
  metric: string;
  value: number;
  unit: string;
  normalization: string;
  context: string[];
}

export interface BenchmarkComparison {
  internal: number;
  external: number;
  variance: number;
  percentile: number;
  interpretation: string;
}

export interface BenchmarkVariance {
  absolute: number;
  relative: number;
  significance: string;
  factors: VarianceFactor[];
}

// Supporting Types
export interface ConfidenceRange {
  lower: number;
  upper: number;
  interval: number;
}

export interface ConfidenceFactor {
  factor: string;
  impact: 'positive' | 'negative' | 'neutral';
  weight: number;
  description: string;
}

export interface AccuracyFactor {
  factor: string;
  impact: number;
  description: string;
  mitigation: string;
}

export interface StructureHierarchy {
  level: number;
  name: string;
  parent: string;
  children: string[];
}

export interface AggregationRule {
  rule: string;
  method: 'sum' | 'average' | 'weighted' | 'formula';
  formula: string;
  validation: string;
}

export interface HierarchyRelationship {
  parent: string;
  child: string;
  type: string;
  weight: number;
}

export interface AggregationValidation {
  method: string;
  tolerance: number;
  escalation: string;
}

export interface AggregationRollup {
  level: number;
  method: string;
  validation: boolean;
  variance: number;
}

export interface VarianceFactor {
  factor: string;
  contribution: number;
  explanation: string;
  controllable: boolean;
}
