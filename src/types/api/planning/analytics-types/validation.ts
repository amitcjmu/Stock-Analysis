/**
 * Plan Validation Types
 * 
 * Type definitions for plan validation workflows, criteria, results, 
 * and constraint validation. Covers validation logic, measurement, 
 * scope, and comprehensive error/warning handling.
 * 
 * Generated by CC - Claude Code
 */

import {
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext
} from '../../shared';

// Plan Validation API Types
export interface ValidatePlanRequest extends BaseApiRequest {
  planId: string;
  planType: 'migration_strategy' | 'timeline' | 'resource' | 'risk' | 'cost' | 'execution';
  validationCriteria: ValidationCriteria[];
  includeConstraintCheck?: boolean;
  includeFeasibilityCheck?: boolean;
  includeComplianceCheck?: boolean;
  context: MultiTenantContext;
}

export interface ValidatePlanResponse extends BaseApiResponse<PlanValidationResult> {
  data: PlanValidationResult;
  isValid: boolean;
  validationErrors: PlanValidationError[];
  validationWarnings: PlanValidationWarning[];
  constraintViolations: ConstraintViolation[];
  feasibilityIssues: FeasibilityIssue[];
  complianceIssues: ComplianceIssue[];
}

// Validation Core Types
export interface ValidationCriteria {
  id: string;
  name: string;
  description: string;
  category: 'completeness' | 'consistency' | 'feasibility' | 'compliance' | 'quality';
  type: 'mandatory' | 'recommended' | 'optional';
  weight: number;
  threshold: ValidationThreshold;
  measurement: ValidationMeasurement;
  scope: ValidationScope;
  rules: ValidationRule[];
}

export interface PlanValidationResult {
  id: string;
  planId: string;
  planType: string;
  validationDate: string;
  overallScore: number;
  overallStatus: 'passed' | 'passed_with_warnings' | 'failed';
  categories: ValidationCategoryResult[];
  criteria: ValidationCriteriaResult[];
  summary: ValidationSummary;
  recommendations: ValidationRecommendation[];
  nextSteps: string[];
}

export interface PlanValidationError {
  id: string;
  criteriaId: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  category: string;
  description: string;
  impact: string;
  location: ErrorLocation;
  resolution: ErrorResolution;
  blocking: boolean;
}

export interface PlanValidationWarning {
  id: string;
  criteriaId: string;
  category: string;
  description: string;
  impact: string;
  location: WarningLocation;
  recommendation: string;
  severity: 'low' | 'medium' | 'high';
}

export interface ConstraintViolation {
  id: string;
  constraintId: string;
  constraintType: string;
  description: string;
  violation: ViolationDetail;
  impact: ViolationImpact;
  resolution: ViolationResolution[];
  severity: 'low' | 'medium' | 'high' | 'critical';
}

export interface FeasibilityIssue {
  id: string;
  category: 'technical' | 'operational' | 'financial' | 'timeline' | 'resource';
  description: string;
  impact: FeasibilityImpact;
  likelihood: number;
  mitigation: FeasibilityMitigation[];
  alternatives: FeasibilityAlternative[];
  recommendation: string;
}

export interface ComplianceIssue {
  id: string;
  requirement: string;
  framework: string;
  description: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  impact: ComplianceImpact;
  remediation: ComplianceRemediation[];
  timeline: ComplianceTimeline;
}

// Validation Supporting Types
export interface ValidationThreshold {
  minimum: number;
  target: number;
  maximum: number;
  unit: string;
  operator: '>=' | '<=' | '=' | '!=' | 'between' | 'in' | 'not_in';
}

export interface ValidationMeasurement {
  method: 'automated' | 'manual' | 'hybrid';
  frequency: string;
  tools: string[];
  data_sources: string[];
  calculation: string;
}

export interface ValidationScope {
  areas: string[];
  boundaries: string[];
  exclusions: string[];
  dependencies: string[];
  stakeholders: string[];
}

export interface ValidationRule {
  id: string;
  name: string;
  description: string;
  logic: RuleLogic;
  parameters: RuleParameter[];
  exceptions: RuleException[];
  enforcement: RuleEnforcement;
}

export interface ValidationCategoryResult {
  category: string;
  score: number;
  status: 'passed' | 'passed_with_warnings' | 'failed';
  criteria: number;
  passed: number;
  warnings: number;
  errors: number;
}

export interface ValidationCriteriaResult {
  criteriaId: string;
  name: string;
  score: number;
  status: 'passed' | 'warning' | 'failed';
  details: CriteriaDetails;
  evidence: CriteriaEvidence[];
  recommendations: string[];
}

export interface ValidationSummary {
  totalCriteria: number;
  passed: number;
  warnings: number;
  errors: number;
  blocking: number;
  score: number;
  grade: 'A' | 'B' | 'C' | 'D' | 'F';
}

export interface ValidationRecommendation {
  id: string;
  type: 'improvement' | 'fix' | 'enhancement' | 'investigation';
  priority: 'low' | 'medium' | 'high' | 'critical';
  description: string;
  rationale: string;
  actions: string[];
  effort: string;
  timeline: string;
  benefits: string[];
}

export interface ErrorLocation {
  section: string;
  element: string;
  field: string;
  line?: number;
  reference: string;
}

export interface ErrorResolution {
  steps: string[];
  resources: string[];
  timeline: string;
  effort: string;
  dependencies: string[];
}

export interface WarningLocation {
  section: string;
  element: string;
  reference: string;
  context: string;
}

export interface ViolationDetail {
  expected: unknown;
  actual: unknown;
  variance: number;
  threshold: number;
  context: string;
}

export interface ViolationImpact {
  scope: 'local' | 'workstream' | 'project' | 'program';
  severity: 'low' | 'medium' | 'high' | 'critical';
  consequences: string[];
  cost: number;
  timeline: string;
}

export interface ViolationResolution {
  option: string;
  description: string;
  effort: string;
  timeline: string;
  cost: number;
  feasibility: string;
  risks: string[];
}

export interface FeasibilityImpact {
  probability: number;
  magnitude: 'low' | 'medium' | 'high' | 'very_high';
  areas: string[];
  consequences: string[];
  timeline: string;
}

export interface FeasibilityMitigation {
  strategy: string;
  actions: string[];
  timeline: string;
  cost: number;
  effectiveness: number;
  risks: string[];
}

export interface FeasibilityAlternative {
  alternative: string;
  description: string;
  feasibility: string;
  pros: string[];
  cons: string[];
  cost: number;
  timeline: string;
}

export interface ComplianceImpact {
  regulatory: string[];
  legal: string[];
  financial: number;
  reputational: string;
  operational: string[];
}

export interface ComplianceRemediation {
  action: string;
  timeline: string;
  owner: string;
  cost: number;
  effectiveness: number;
  validation: string;
}

export interface ComplianceTimeline {
  immediate: string[];
  short_term: string[];
  medium_term: string[];
  long_term: string[];
}

// Rule and Logic Supporting Types
export interface RuleLogic {
  type: 'condition' | 'formula' | 'script' | 'lookup';
  expression: string;
  variables: RuleVariable[];
  functions: RuleFunction[];
}

export interface RuleParameter {
  name: string;
  type: string;
  value: unknown;
  description: string;
  required: boolean;
}

export interface RuleException {
  condition: string;
  action: 'skip' | 'warn' | 'override';
  rationale: string;
  approval: string;
}

export interface RuleEnforcement {
  level: 'advisory' | 'warning' | 'error' | 'blocking';
  automated: boolean;
  escalation: string;
  override: string;
}

export interface CriteriaDetails {
  measurement: number;
  threshold: number;
  variance: number;
  trend: string;
  factors: string[];
}

export interface CriteriaEvidence {
  type: string;
  source: string;
  value: unknown;
  confidence: number;
  timestamp: string;
}

export interface RuleVariable {
  name: string;
  type: string;
  source: string;
  transformation: string;
}

export interface RuleFunction {
  name: string;
  parameters: string[];
  description: string;
}

export interface ValidationCheck {
  check: string;
  result: boolean;
  message: string;
  severity: string;
}

export interface ValidationResult {
  test: string;
  result: boolean;
  details: string;
}