/**
 * Risk Register Types
 * 
 * Type definitions for risk registration, identification, and tracking.
 * Handles the complete lifecycle of registered risks and their metadata.
 * 
 * Generated by CC - Claude Code
 */

import type {
  RiskApproval,
  RiskReview,
  RiskTrigger,
  RiskIndicator,
  IdentificationContext,
  StakeholderCommunication
} from './utilities';

// Risk Register and Assessment Types
export interface RiskRegister {
  id: string;
  risks: RegisteredRisk[];
  totalRisks: number;
  activeRisks: number;
  closedRisks: number;
  lastUpdated: string;
  version: number;
  approvals: RiskApproval[];
  reviews: RiskReview[];
}

export interface RegisteredRisk {
  id: string;
  name: string;
  description: string;
  category: string;
  subcategory: string;
  source: RiskSource;
  identification: RiskIdentification;
  assessment: RiskAssessment;
  treatment: RiskTreatment;
  monitoring: RiskMonitoring;
  status: RiskStatus;
  ownership: RiskOwnership;
  timeline: RiskEventTimeline;
  dependencies: RiskDependency[];
  relationships: RiskRelationship[];
}

export interface RiskSource {
  type: 'internal' | 'external' | 'stakeholder' | 'expert' | 'historical' | 'model';
  description: string;
  confidence: number;
  date: string;
  validator: string;
  evidence: string[];
}

export interface RiskIdentification {
  method: 'brainstorming' | 'interview' | 'survey' | 'checklist' | 'swot' | 'root_cause' | 'scenario';
  participants: string[];
  date: string;
  context: IdentificationContext;
  triggers: RiskTrigger[];
  indicators: RiskIndicator[];
}

export interface RiskAssessment {
  probability: ProbabilityAssessment;
  impact: ImpactAssessment;
  riskScore: number;
  riskLevel: 'low' | 'medium' | 'high' | 'critical';
  velocity: RiskVelocity;
  proximity: RiskProximity;
  uncertainty: UncertaintyAssessment;
  confidence: number;
  assumptions: string[];
  limitations: string[];
}

export interface RiskTreatment {
  strategy: 'avoid' | 'mitigate' | 'transfer' | 'accept' | 'exploit' | 'share' | 'enhance';
  rationale: string;
  actions: TreatmentAction[];
  controls: RiskControl[];
  contingency: ContingencyMeasure[];
  cost: TreatmentCost;
  timeline: TreatmentTimeline;
  effectiveness: TreatmentEffectiveness;
  residualRisk: ResidualRisk;
}

export interface RiskMonitoring {
  frequency: string;
  indicators: MonitoringIndicator[];
  thresholds: MonitoringThreshold[];
  alerts: MonitoringAlert[];
  reports: MonitoringReport[];
  reviews: MonitoringReview[];
  escalation: MonitoringEscalation[];
}

export interface RiskStatus {
  current: 'identified' | 'assessed' | 'treated' | 'monitored' | 'closed' | 'escalated';
  previous: string;
  changed: string;
  reason: string;
  approver: string;
  nextReview: string;
}

export interface RiskOwnership {
  owner: string;
  accountable: string;
  responsible: string[];
  consulted: string[];
  informed: string[];
  escalation: string;
}

export interface RiskEventTimeline {
  identified: string;
  assessed: string;
  treated: string;
  monitored: string;
  closed?: string;
  milestones: EventMilestone[];
}

export interface RiskDependency {
  dependencyId: string;
  type: 'causal' | 'correlational' | 'conditional' | 'temporal';
  relationship: 'one_to_one' | 'one_to_many' | 'many_to_many';
  strength: 'weak' | 'medium' | 'strong';
  direction: 'unidirectional' | 'bidirectional';
}

export interface RiskRelationship {
  relationshipId: string;
  type: 'aggregate' | 'compound' | 'cascade' | 'parallel';
  risks: string[];
  effect: 'amplification' | 'mitigation' | 'neutralization';
  strength: number;
}

// Assessment Detail Types
export interface ProbabilityAssessment {
  value: number;
  scale: 'percentage' | 'decimal' | 'qualitative';
  confidence: number;
  method: string;
  timeframe: string;
  assumptions: string[];
}

export interface ImpactAssessment {
  dimensions: ImpactDimension[];
  overall: number;
  scale: 'monetary' | 'ordinal' | 'qualitative';
  confidence: number;
  method: string;
  assumptions: string[];
}

export interface ImpactDimension {
  dimension: 'financial' | 'schedule' | 'performance' | 'reputation' | 'safety' | 'compliance';
  value: number;
  unit: string;
  weight: number;
  description: string;
}

export interface RiskVelocity {
  speed: 'very_slow' | 'slow' | 'medium' | 'fast' | 'very_fast';
  description: string;
  timeframe: string;
  factors: string[];
}

export interface RiskProximity {
  timing: 'immediate' | 'near_term' | 'medium_term' | 'long_term';
  description: string;
  date?: string;
  uncertainty: string;
}

export interface UncertaintyAssessment {
  level: 'low' | 'medium' | 'high' | 'very_high';
  sources: string[];
  impact: string;
  mitigation: string;
}

// Treatment Detail Types
export interface TreatmentAction {
  action: string;
  type: 'preventive' | 'corrective' | 'detective' | 'directive';
  description: string;
  owner: string;
  timeline: string;
  cost: number;
  effectiveness: number;
}

export interface RiskControl {
  control: string;
  type: 'preventive' | 'detective' | 'corrective' | 'directive';
  automation: 'manual' | 'semi_automated' | 'automated';
  frequency: string;
  effectiveness: ControlEffectiveness;
  testing: ControlTesting;
}

export interface ContingencyMeasure {
  measure: string;
  trigger: string;
  action: string;
  resources: string[];
  cost: number;
  timeline: string;
}

export interface TreatmentCost {
  upfront: number;
  ongoing: number;
  contingency: number;
  total: number;
  currency: string;
  funding: string;
}

export interface TreatmentTimeline {
  start: string;
  milestones: TreatmentMilestone[];
  completion: string;
  dependencies: string[];
}

export interface TreatmentEffectiveness {
  expected: number;
  range: EffectivenessRange;
  confidence: number;
  measurement: string;
  validation: string;
}

export interface ResidualRisk {
  probability: number;
  impact: number;
  riskScore: number;
  level: 'low' | 'medium' | 'high' | 'critical';
  acceptability: boolean;
  justification: string;
}

// Supporting Detail Types
export interface ControlEffectiveness {
  design: number;
  operation: number;
  overall: number;
  assessment: string;
}

export interface ControlTesting {
  frequency: string;
  method: string;
  last_test: string;
  result: string;
  next_test: string;
}

export interface TreatmentMilestone {
  milestone: string;
  date: string;
  criteria: string[];
  status: string;
}

export interface EffectivenessRange {
  minimum: number;
  maximum: number;
  most_likely: number;
}

export interface EventMilestone {
  event: string;
  date: string;
  status: string;
  notes: string;
}

// Monitoring Detail Types
export interface MonitoringIndicator {
  indicator: string;
  type: 'quantitative' | 'qualitative';
  measure: string;
  target: number;
  threshold: MonitoringThreshold;
  frequency: string;
}

export interface MonitoringThreshold {
  green: ThresholdRange;
  amber: ThresholdRange;
  red: ThresholdRange;
  action: ThresholdAction[];
}

export interface MonitoringAlert {
  alert: string;
  condition: string;
  severity: 'info' | 'warning' | 'critical';
  recipients: string[];
  escalation: AlertEscalation;
}

export interface MonitoringReport {
  report: string;
  frequency: string;
  content: string[];
  recipients: string[];
  format: string;
}

export interface MonitoringReview {
  frequency: string;
  participants: string[];
  agenda: string[];
  outcomes: string[];
  actions: string[];
}

export interface MonitoringEscalation {
  level: number;
  condition: string;
  timeframe: string;
  recipient: string;
  action: string;
}

export interface ThresholdRange {
  minimum: number;
  maximum: number;
}

export interface ThresholdAction {
  threshold: string;
  action: string;
  owner: string;
  timeline: string;
}

export interface AlertEscalation {
  levels: EscalationLevel[];
  timeframes: string[];
  actions: string[];
}

export interface EscalationLevel {
  level: number;
  recipient: string;
  authority: string;
  action: string;
}