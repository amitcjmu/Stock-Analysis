/**
 * Decommission Status Tracking Types
 *
 * Type definitions for tracking decommission status and progress.
 * Generated by CC (Claude Code) - Modularized from decommission/index.ts
 */

import type { StrategyFlowStatus } from '../shared';
import type { DecommissionRisk } from './risks';

/**
 * Detailed decommission status
 */
export interface DecommissionStatusDetail {
  flowId: string;
  status: StrategyFlowStatus;
  progress: DecommissionProgress;
  currentPhase: string;
  phaseDetails: DecommissionPhaseDetail[];
  dataMigration: DataMigrationStatus;
  systemStatus: SystemDecommissionStatus[];
  risks: DecommissionRisk[];
  approvals: DecommissionApprovalStatus[];
  blockers: DecommissionBlocker[];
  nextActions: DecommissionNextAction[];
  lastUpdated: string;
}

/**
 * Overall progress tracking
 */
export interface DecommissionProgress {
  overall: number;
  planning: number;
  dataMigration: number;
  systemDecommission: number;
  validation: number;
  cleanup: number;
  milestones: DecommissionMilestoneStatus[];
}

/**
 * Milestone status
 */
export interface DecommissionMilestoneStatus {
  milestoneId: string;
  name: string;
  status: 'upcoming' | 'in_progress' | 'completed' | 'at_risk' | 'missed';
  dueDate: string;
  completion: number;
  blockers: string[];
}

/**
 * Phase detail tracking
 */
export interface DecommissionPhaseDetail {
  phaseId: string;
  name: string;
  status: 'not_started' | 'in_progress' | 'completed' | 'blocked' | 'at_risk';
  progress: number;
  activities: DecommissionActivityStatus[];
  deliverables: DecommissionDeliverableStatus[];
  issues: DecommissionIssue[];
}

/**
 * Activity status
 */
export interface DecommissionActivityStatus {
  activityId: string;
  name: string;
  status: string;
  progress: number;
  assignee: string;
  dueDate: string;
  dependencies: string[];
  blockers: string[];
}

/**
 * Deliverable status
 */
export interface DecommissionDeliverableStatus {
  name: string;
  status: 'not_started' | 'in_progress' | 'under_review' | 'approved' | 'rejected';
  dueDate: string;
  owner: string;
  approver?: string;
  quality: number;
}

/**
 * Issue tracking
 */
export interface DecommissionIssue {
  id: string;
  type: 'blocker' | 'risk' | 'concern' | 'question';
  severity: 'low' | 'medium' | 'high' | 'critical';
  description: string;
  impact: string;
  owner: string;
  status: 'open' | 'investigating' | 'resolved' | 'escalated';
  createdAt: string;
  resolution?: string;
}

/**
 * Data migration status
 */
export interface DataMigrationStatus {
  overall: number;
  extraction: number;
  transformation: number;
  loading: number;
  validation: number;
  datasets: DatasetMigrationStatus[];
  issues: DataMigrationIssue[];
  metrics: DataMigrationMetrics;
}

/**
 * Dataset migration status
 */
export interface DatasetMigrationStatus {
  dataset: string;
  status: 'not_started' | 'extracting' | 'transforming' | 'loading' | 'validating' | 'completed' | 'failed';
  progress: number;
  recordsProcessed: number;
  recordsTotal: number;
  errors: number;
  lastUpdate: string;
}

/**
 * Data migration issue
 */
export interface DataMigrationIssue {
  id: string;
  dataset: string;
  type: 'data_quality' | 'transformation_error' | 'validation_failure' | 'performance';
  severity: 'low' | 'medium' | 'high' | 'critical';
  description: string;
  count: number;
  resolution: string;
  status: 'open' | 'investigating' | 'resolved';
}

/**
 * Data migration metrics
 */
export interface DataMigrationMetrics {
  throughput: number;
  errorRate: number;
  dataQualityScore: number;
  validationScore: number;
  performanceMetrics: Record<string, number>;
}

/**
 * System decommission status
 */
export interface SystemDecommissionStatus {
  systemId: string;
  name: string;
  status: 'active' | 'draining' | 'offline' | 'decommissioned' | 'disposed';
  progress: number;
  activities: SystemDecommissionActivity[];
  dependencies: SystemDecommissionDependency[];
  lastUpdate: string;
}

/**
 * System decommission activity
 */
export interface SystemDecommissionActivity {
  activity: string;
  status: 'pending' | 'in_progress' | 'completed' | 'failed';
  startedAt?: string;
  completedAt?: string;
  errors: string[];
}

/**
 * System decommission dependency
 */
export interface SystemDecommissionDependency {
  system: string;
  status: 'resolved' | 'pending' | 'blocked';
  description: string;
  resolution?: string;
}

/**
 * Approval status
 */
export interface DecommissionApprovalStatus {
  approvalId: string;
  type: string;
  status: 'pending' | 'approved' | 'rejected' | 'conditional' | 'expired';
  approver: string;
  requestedAt: string;
  respondedAt?: string;
  conditions?: string[];
  comments?: string;
}

/**
 * Blocker tracking
 */
export interface DecommissionBlocker {
  id: string;
  type: 'dependency' | 'approval' | 'technical' | 'data' | 'compliance';
  description: string;
  impact: 'low' | 'medium' | 'high' | 'critical';
  owner: string;
  estimatedResolution: string;
  alternatives: string[];
  escalation: string[];
}

/**
 * Next action item
 */
export interface DecommissionNextAction {
  id: string;
  type: 'task' | 'approval' | 'decision' | 'escalation';
  description: string;
  priority: 'low' | 'medium' | 'high' | 'urgent';
  dueDate: string;
  assignee: string;
  dependencies: string[];
  blockers: string[];
}
