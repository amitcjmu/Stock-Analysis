/**
 * Decommission Planning Types
 *
 * Type definitions for decommission plan creation and management.
 * Generated by CC (Claude Code) - Modularized from decommission/index.ts
 */

import type { CreateRequest, CreateResponse } from '../../shared';
import type { RollbackPlan, CommunicationPlan } from '../shared';
import type { DecommissionApproach } from './base-types';
import type { DecommissionScope } from './scope';
import type { DecommissionStrategy } from './strategy';
import type { DecommissionTimeline } from './timeline';
import type { DecommissionResources } from './resources';
import type { DecommissionRisk } from './risks';
import type { ComplianceRequirement } from './compliance';
import type { DecommissionStakeholder, DecommissionDependency } from './stakeholders';
import type { DecommissionExecutionPlan } from './execution-plans';
import type { DataMappingPlan } from './data-mapping';
import type { DecommissionValidationPlan } from './validation-and-rollback';
import type { DecommissionApprovalWorkflow } from './approval-workflows';

/**
 * Risk mitigation strategy
 */
export interface RiskMitigationStrategy {
  riskId: string;
  strategy: string;
  actions: string[];
  timeline: string;
  cost: number;
  effectiveness: number;
  owner: string;
  monitoring: string[];
  reporting: string;
}

/**
 * Data handling strategy
 */
export interface DataHandlingStrategy {
  approach: string;
  classification: string[];
  retention: string;
  disposal: string;
  archival: string;
}

/**
 * Request to create decommission plan
 */
export interface CreateDecommissionPlanRequest extends CreateRequest<DecommissionPlanData> {
  flowId: string;
  data: DecommissionPlanData;
  planningMethod: 'big_bang' | 'phased' | 'parallel_run' | 'gradual_cutover';
  riskMitigation: RiskMitigationStrategy[];
  dataHandling: DataHandlingStrategy;
  communicationPlan: CommunicationPlan;
  rollbackPlan: RollbackPlan;
  complianceRequirements: ComplianceRequirement[];
}

/**
 * Response from decommission plan creation
 */
export interface CreateDecommissionPlanResponse extends CreateResponse<DecommissionPlan> {
  data: DecommissionPlan;
  planId: string;
  executionPlan: DecommissionExecutionPlan;
  dataMapping: DataMappingPlan;
  validationPlan: DecommissionValidationPlan;
  approvalWorkflow: DecommissionApprovalWorkflow;
}

/**
 * Decommission approval requirement
 */
export interface DecommissionApprovalRequirement {
  type: 'plan' | 'execution' | 'data_disposal' | 'compliance' | 'business' | 'final';
  approver: string;
  criteria: string[];
  dependencies: string[];
  timeline: string;
  status: 'pending' | 'approved' | 'rejected' | 'conditional';
}

/**
 * Decommission plan data
 */
export interface DecommissionPlanData {
  name: string;
  description: string;
  approach: DecommissionApproach;
  scope: DecommissionScope;
  strategy: DecommissionStrategy;
  timeline: DecommissionTimeline;
  resources: DecommissionResources;
  risks: DecommissionRisk[];
  compliance: ComplianceRequirement[];
  stakeholders: DecommissionStakeholder[];
  dependencies: DecommissionDependency[];
  approval: DecommissionApprovalRequirement[];
}

/**
 * Complete decommission plan
 */
export interface DecommissionPlan extends DecommissionPlanData {
  id: string;
  planId: string;
  status: 'draft' | 'review' | 'approved' | 'executing' | 'completed' | 'cancelled';
  version: string;
  createdBy: string;
  createdAt: string;
  updatedAt: string;
  approvedAt?: string;
  approvedBy?: string;
}
