/**
 * 6R Strategy Flow Analytics Types
 * 
 * Analytics, aggregation, trending, and portfolio metrics
 * for strategy flow management.
 * 
 * Generated by CC (Claude Code) - Modularized from flow-management.ts
 */

import { StrategyType, StrategyFlowStatus, PriorityLevel } from './base-types';

// Analytics and Insights
export interface StrategyAnalytics {
  summary: AnalyticsSummary;
  trends: AnalyticsTrend[];
  benchmarks: AnalyticsBenchmark[];
  insights: AnalyticsInsight[];
  predictions: AnalyticsPrediction[];
  correlations: AnalyticsCorrelation[];
}

export interface AnalyticsSummary {
  totalFlows: number;
  avgDuration: string;
  successRate: number;
  commonBlockers: string[];
  topRisks: string[];
  costEfficiency: number;
}

export interface AnalyticsTrend {
  metric: string;
  direction: 'up' | 'down' | 'stable';
  magnitude: number;
  significance: 'low' | 'medium' | 'high';
  timeframe: string;
}

export interface AnalyticsBenchmark {
  metric: string;
  current: number;
  benchmark: number;
  percentile: number;
  industry: string;
  comparison: 'above' | 'at' | 'below';
}

export interface AnalyticsInsight {
  type: 'opportunity' | 'risk' | 'trend' | 'anomaly';
  title: string;
  description: string;
  impact: 'low' | 'medium' | 'high';
  confidence: number;
  actionable: boolean;
  recommendations: string[];
}

export interface AnalyticsPrediction {
  metric: string;
  horizon: string;
  prediction: number;
  confidence: number;
  factors: string[];
  scenarios: PredictionScenario[];
}

export interface PredictionScenario {
  name: string;
  probability: number;
  outcome: number;
  factors: string[];
}

export interface AnalyticsCorrelation {
  metricA: string;
  metricB: string;
  correlation: number;
  strength: 'weak' | 'moderate' | 'strong';
  significance: number;
}

// Aggregation and Trending
export interface StrategyAggregation {
  dimension: string;
  values: AggregationValue[];
  total: number;
}

export interface AggregationValue {
  key: string;
  count: number;
  percentage: number;
  metrics?: Record<string, number>;
}

export interface StrategyTrend {
  metric: string;
  period: string;
  values: TrendDataPoint[];
  trend: 'increasing' | 'decreasing' | 'stable';
  forecast?: TrendDataPoint[];
}

export interface TrendDataPoint {
  period: string;
  value: number;
  change?: number;
  changePercentage?: number;
}

// Portfolio Metrics
export interface StrategyPortfolioMetrics {
  totalFlows: number;
  activeFlows: number;
  completedFlows: number;
  averageProgress: number;
  onTrackPercentage: number;
  riskDistribution: Record<string, number>;
  costMetrics: PortfolioCostMetrics;
  performanceMetrics: PortfolioPerformanceMetrics;
}

export interface PortfolioCostMetrics {
  totalBudget: number;
  totalActual: number;
  totalForecast: number;
  averageVariance: number;
  costByStrategy: Record<string, number>;
}

export interface PortfolioPerformanceMetrics {
  averageCycleTime: string;
  throughput: number;
  successRate: number;
  qualityScore: number;
  riskScore: number;
}

// Flow Summary Types
export interface StrategyFlowSummary {
  id: string;
  flowId: string;
  flowName: string;
  strategyType: StrategyType;
  status: StrategyFlowStatus;
  progress: number;
  priority: PriorityLevel;
  currentPhase: string;
  riskLevel: string;
  estimatedCompletion?: string;
  createdAt: string;
  updatedAt: string;
}
