/**
 * 6R Strategy Shared Base Types
 * 
 * Common type definitions shared across the 6R strategy modules:
 * - Assessment (Rehost readiness evaluation)
 * - Modernize (Refactor/Rearchitect transformations)  
 * - Decommission (Retire/Retain strategies)
 * 
 * Provides foundational interfaces for flow management, execution planning,
 * risk assessment, and compliance tracking.
 * 
 * Generated by CC (Claude Code) - 6R Strategy Type Modularization
 */

import { 
  BaseApiRequest,
  BaseApiResponse,
  MultiTenantContext,
  ValidationResult
} from '../../shared';

// Base Flow Management Types
export interface StrategyFlowData {
  id: string;
  flowId: string;
  flowName: string;
  flowDescription?: string;
  strategyType: StrategyType;
  status: StrategyFlowStatus;
  priority: PriorityLevel;
  scope: StrategyScope;
  progress: number;
  phases: StrategyPhases;
  currentPhase: string;
  clientAccountId: string;
  engagementId: string;
  userId: string;
  createdAt: string;
  updatedAt: string;
  completedAt?: string;
  metadata: Record<string, any>;
}

export type StrategyType = 'assessment' | 'modernization' | 'decommission';

export type StrategyFlowStatus = 
  | 'draft' | 'planning' | 'approved' | 'in_progress' | 'paused'
  | 'completed' | 'failed' | 'cancelled' | 'under_review';

export type PriorityLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high' | 'critical';

export interface StrategyScope {
  applications: string[];
  infrastructure: string[];
  data: string[];
  security: string[];
  compliance: string[];
  geography: string[];
  businessUnits: string[];
  timeframe: TimeRange;
  exclusions?: string[];
  constraints?: string[];
}

export interface TimeRange {
  start: string;
  end: string;
}

export interface StrategyPhases {
  assessment: PhaseDefinition;
  planning: PhaseDefinition;
  execution: PhaseDefinition;
  validation: PhaseDefinition;
  completion: PhaseDefinition;
}

export interface PhaseDefinition {
  id: string;
  name: string;
  description: string;
  status: PhaseStatus;
  progress: number;
  startDate?: string;
  endDate?: string;
  estimatedDuration: string;
  dependencies: string[];
  deliverables: string[];
  risks: string[];
}

export type PhaseStatus = 
  | 'not_started' | 'in_progress' | 'completed' | 'blocked' | 'skipped';

// Risk Assessment Base Types
export interface RiskAssessment {
  id: string;
  overallRiskLevel: RiskLevel;
  riskCategories: RiskCategory[];
  mitigationStrategies: MitigationStrategy[];
  contingencyPlans: ContingencyPlan[];
  riskMatrix: RiskMatrix;
  assessedAt: string;
  assessedBy: string;
  nextReviewDate: string;
}

export type RiskLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high' | 'critical';

export interface RiskCategory {
  category: 'technical' | 'business' | 'operational' | 'financial' | 'compliance' | 'security';
  risks: Risk[];
  overallLevel: RiskLevel;
  impact: ImpactAssessment;
}

export interface Risk {
  id: string;
  name: string;
  description: string;
  category: string;
  likelihood: LikelihoodLevel;
  impact: ImpactLevel;
  riskLevel: RiskLevel;
  owner: string;
  status: RiskStatus;
  mitigation: string;
  contingency: string;
  identifiedAt: string;
  lastReviewedAt: string;
}

export type LikelihoodLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high';
export type ImpactLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high';
export type RiskStatus = 'open' | 'mitigated' | 'accepted' | 'transferred' | 'closed';

export interface MitigationStrategy {
  id: string;
  riskId: string;
  strategy: string;
  description: string;
  cost: number;
  timeline: string;
  effectiveness: number;
  owner: string;
  status: 'planned' | 'implementing' | 'implemented' | 'failed';
}

export interface ContingencyPlan {
  id: string;
  trigger: string;
  actions: ContingencyAction[];
  resources: string[];
  timeline: string;
  owner: string;
  activated: boolean;
}

export interface ContingencyAction {
  id: string;
  description: string;
  type: 'automatic' | 'manual';
  priority: number;
  duration: string;
  dependencies: string[];
}

export interface RiskMatrix {
  dimensions: MatrixDimension[];
  cells: MatrixCell[];
  thresholds: RiskThreshold[];
}

export interface MatrixDimension {
  name: string;
  axis: 'x' | 'y';
  scale: ScalePoint[];
}

export interface ScalePoint {
  value: number;
  label: string;
  description: string;
}

export interface MatrixCell {
  x: number;
  y: number;
  riskLevel: RiskLevel;
  color: string;
  actionRequired: boolean;
}

export interface RiskThreshold {
  level: RiskLevel;
  escalation: string[];
  approvalRequired: boolean;
  actions: string[];
}

export interface ImpactAssessment {
  business: BusinessImpact;
  technical: TechnicalImpact;
  financial: FinancialImpact;
  operational: OperationalImpact;
  compliance: ComplianceImpact;
}

export interface BusinessImpact {
  level: ImpactLevel;
  description: string;
  affectedProcesses: string[];
  customerImpact: string;
  reputationRisk: string;
  businessContinuity: string;
}

export interface TechnicalImpact {
  level: ImpactLevel;
  description: string;
  systemsAffected: string[];
  dataIntegrity: string;
  performanceImpact: string;
  securityImplications: string;
}

export interface FinancialImpact {
  level: ImpactLevel;
  directCost: number;
  indirectCost: number;
  potentialSavings: number;
  currency: string;
  costBreakdown: CostBreakdownItem[];
}

export interface CostBreakdownItem {
  category: string;
  amount: number;
  description: string;
  recurring: boolean;
}

export interface OperationalImpact {
  level: ImpactLevel;
  description: string;
  resourceRequirements: string[];
  processChanges: string[];
  trainingNeeds: string[];
  maintenanceImpact: string;
}

export interface ComplianceImpact {
  level: ImpactLevel;
  description: string;
  regulationsAffected: string[];
  complianceGaps: string[];
  auditRequirements: string[];
  certificationImpact: string;
}

// Stakeholder Management Types
export interface Stakeholder {
  id: string;
  name: string;
  role: string;
  organization: string;
  contactInfo: ContactInfo;
  responsibilities: string[];
  influence: InfluenceLevel;
  interest: InterestLevel;
  communicationPreferences: CommunicationPreference[];
  availability: AvailabilityWindow[];
}

export interface ContactInfo {
  email: string;
  phone?: string;
  alternativeEmail?: string;
  preferredChannel: 'email' | 'phone' | 'slack' | 'teams' | 'in_person';
}

export type InfluenceLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high';
export type InterestLevel = 'very_low' | 'low' | 'medium' | 'high' | 'very_high';

export interface CommunicationPreference {
  channel: 'email' | 'phone' | 'slack' | 'teams' | 'dashboard' | 'report';
  frequency: 'real_time' | 'daily' | 'weekly' | 'monthly' | 'milestone' | 'on_demand';
  format: 'summary' | 'detailed' | 'technical' | 'executive';
}

export interface AvailabilityWindow {
  dayOfWeek: string;
  startTime: string;
  endTime: string;
  timezone: string;
}

// Dependency Management Types
export interface Dependency {
  id: string;
  name: string;
  type: DependencyType;
  description: string;
  dependentOn: string;
  status: DependencyStatus;
  criticality: CriticalityLevel;
  owner: string;
  resolution: DependencyResolution;
  blockedTasks: string[];
  estimatedResolution: string;
}

export type DependencyType = 
  | 'technical' | 'business' | 'resource' | 'approval' | 'vendor' | 'regulatory';

export type DependencyStatus = 
  | 'identified' | 'analyzing' | 'waiting' | 'in_progress' | 'resolved' | 'escalated';

export type CriticalityLevel = 'low' | 'medium' | 'high' | 'critical';

export interface DependencyResolution {
  approach: string;
  timeline: string;
  resources: string[];
  alternatives: string[];
  escalationPath: string[];
}

// Approval Management Types
export interface ApprovalRequirement {
  id: string;
  type: ApprovalType;
  name: string;
  description: string;
  approver: Approver;
  criteria: ApprovalCriteria[];
  status: ApprovalStatus;
  requestedAt?: string;
  respondedAt?: string;
  comments?: string;
  conditions?: string[];
}

export type ApprovalType = 
  | 'plan' | 'budget' | 'technical' | 'business' | 'compliance' | 'security' | 'go_live';

export interface Approver {
  id: string;
  name: string;
  role: string;
  authority: ApprovalAuthority;
  delegation: ApprovalDelegation;
}

export type ApprovalAuthority = 'full' | 'conditional' | 'advisory' | 'delegated';

export interface ApprovalDelegation {
  enabled: boolean;
  delegate?: string;
  conditions?: string[];
  timeframe?: string;
}

export interface ApprovalCriteria {
  criterion: string;
  mandatory: boolean;
  validationMethod: 'automatic' | 'manual' | 'hybrid';
  evidence: string[];
}

export type ApprovalStatus = 
  | 'not_requested' | 'pending' | 'under_review' | 'approved' | 'rejected' 
  | 'conditional' | 'expired' | 'withdrawn';

// Execution Planning Types
export interface ExecutionPlan {
  id: string;
  phases: ExecutionPhase[];
  timeline: ExecutionTimeline;
  resources: ResourcePlan;
  quality: QualityPlan;
  communication: CommunicationPlan;
  monitoring: MonitoringPlan;
  rollback: RollbackPlan;
}

export interface ExecutionPhase {
  id: string;
  name: string;
  description: string;
  type: 'sequential' | 'parallel' | 'conditional';
  tasks: ExecutionTask[];
  duration: string;
  startConditions: string[];
  exitCriteria: string[];
  deliverables: string[];
  approvals: string[];
}

export interface ExecutionTask {
  id: string;
  name: string;
  description: string;
  type: TaskType;
  assignee: string;
  estimatedEffort: string;
  dependencies: string[];
  resources: string[];
  deliverables: string[];
  validationCriteria: string[];
}

export type TaskType = 
  | 'analysis' | 'design' | 'development' | 'testing' | 'deployment' 
  | 'validation' | 'documentation' | 'training' | 'approval';

export interface ExecutionTimeline {
  startDate: string;
  endDate: string;
  milestones: Milestone[];
  criticalPath: string[];
  bufferTime: string;
  dependencies: TimelineDependency[];
}

export interface Milestone {
  id: string;
  name: string;
  date: string;
  type: MilestoneType;
  criteria: string[];
  deliverables: string[];
  approvals: string[];
}

export type MilestoneType = 
  | 'phase_start' | 'phase_end' | 'decision_point' | 'delivery' 
  | 'go_live' | 'validation' | 'completion';

export interface TimelineDependency {
  id: string;
  predecessor: string;
  successor: string;
  type: 'finish_to_start' | 'start_to_start' | 'finish_to_finish' | 'start_to_finish';
  lag: string;
}

// Resource Planning Types
export interface ResourcePlan {
  human: HumanResource[];
  technical: TechnicalResource[];
  financial: FinancialResource[];
  external: ExternalResource[];
}

export interface HumanResource {
  role: string;
  skills: string[];
  level: 'junior' | 'mid' | 'senior' | 'expert';
  allocation: number;
  duration: string;
  availability: string;
  cost: number;
}

export interface TechnicalResource {
  type: 'hardware' | 'software' | 'infrastructure' | 'tools';
  name: string;
  specifications: Record<string, any>;
  quantity: number;
  duration: string;
  cost: number;
}

export interface FinancialResource {
  category: string;
  description: string;
  amount: number;
  currency: string;
  approval: ApprovalRequirement;
  constraints: string[];
}

export interface ExternalResource {
  type: 'vendor' | 'consultant' | 'partner' | 'service';
  name: string;
  services: string[];
  sla: ServiceLevelAgreement;
  cost: number;
  contract: ContractDetails;
}

export interface ServiceLevelAgreement {
  availability: string;
  responseTime: string;
  resolutionTime: string;
  penalties: SLAPenalty[];
}

export interface SLAPenalty {
  condition: string;
  penalty: string;
  amount?: number;
}

export interface ContractDetails {
  type: 'fixed' | 'time_and_materials' | 'milestone' | 'retainer';
  duration: string;
  terms: string[];
  deliverables: string[];
}

// Quality and Validation Types
export interface QualityPlan {
  standards: QualityStandard[];
  gates: QualityGate[];
  metrics: QualityMetric[];
  testing: TestingStrategy;
  reviews: ReviewProcess[];
}

export interface QualityStandard {
  name: string;
  description: string;
  requirements: string[];
  validation: string[];
  tools: string[];
}

export interface QualityGate {
  id: string;
  phase: string;
  criteria: QualityCriteria[];
  action: 'continue' | 'pause' | 'rollback';
  approver: string;
}

export interface QualityCriteria {
  metric: string;
  threshold: number;
  operator: 'gt' | 'gte' | 'lt' | 'lte' | 'eq';
  mandatory: boolean;
}

export interface QualityMetric {
  name: string;
  description: string;
  measurement: string;
  target: number;
  threshold: number;
  frequency: string;
}

export interface TestingStrategy {
  phases: TestingPhase[];
  environments: TestingEnvironment[];
  data: TestDataStrategy;
  automation: AutomationStrategy;
}

export interface TestingPhase {
  name: string;
  type: 'unit' | 'integration' | 'system' | 'acceptance' | 'performance' | 'security';
  scope: string[];
  criteria: string[];
  tools: string[];
}

export interface TestingEnvironment {
  name: string;
  type: 'development' | 'testing' | 'staging' | 'production_like';
  configuration: Record<string, any>;
  access: string[];
}

export interface TestDataStrategy {
  approach: 'production_copy' | 'synthetic' | 'masked' | 'anonymized';
  volume: string;
  refresh: string;
  compliance: string[];
}

export interface AutomationStrategy {
  scope: string[];
  tools: string[];
  coverage: number;
  maintenance: string;
}

export interface ReviewProcess {
  type: 'peer' | 'technical' | 'business' | 'compliance';
  phase: string;
  participants: string[];
  criteria: string[];
  deliverables: string[];
}

// Communication Planning Types
export interface CommunicationPlan {
  stakeholders: CommunicationStakeholder[];
  channels: CommunicationChannel[];
  schedules: CommunicationSchedule[];
  templates: CommunicationTemplate[];
  escalation: EscalationPath[];
}

export interface CommunicationStakeholder {
  stakeholderId: string;
  role: string;
  interests: string[];
  concerns: string[];
  frequency: string;
  channels: string[];
}

export interface CommunicationChannel {
  type: 'email' | 'dashboard' | 'report' | 'meeting' | 'slack' | 'portal';
  purpose: string;
  audience: string[];
  frequency: string;
  format: string;
}

export interface CommunicationSchedule {
  type: 'status' | 'milestone' | 'issue' | 'decision' | 'completion';
  frequency: string;
  participants: string[];
  agenda: string[];
  deliverables: string[];
}

export interface CommunicationTemplate {
  type: string;
  name: string;
  format: 'email' | 'report' | 'presentation' | 'dashboard';
  content: TemplateSection[];
  variables: TemplateVariable[];
}

export interface TemplateSection {
  name: string;
  order: number;
  content: string;
  required: boolean;
}

export interface TemplateVariable {
  name: string;
  type: 'text' | 'number' | 'date' | 'list' | 'object';
  required: boolean;
  default?: any;
}

export interface EscalationPath {
  trigger: string;
  levels: EscalationLevel[];
  timeouts: string[];
  actions: string[];
}

export interface EscalationLevel {
  level: number;
  contacts: string[];
  authority: string[];
  actions: string[];
}

// Monitoring and Reporting Types
export interface MonitoringPlan {
  metrics: MonitoringMetric[];
  dashboards: Dashboard[];
  alerts: AlertRule[];
  reports: ReportDefinition[];
  frequency: string;
}

export interface MonitoringMetric {
  name: string;
  type: 'progress' | 'quality' | 'performance' | 'cost' | 'risk';
  measurement: string;
  target: number;
  threshold: number;
  trend: 'up' | 'down' | 'stable';
}

export interface Dashboard {
  name: string;
  audience: string[];
  widgets: DashboardWidget[];
  refresh: string;
  access: string[];
}

export interface DashboardWidget {
  type: 'chart' | 'metric' | 'table' | 'status' | 'progress';
  title: string;
  dataSource: string;
  configuration: Record<string, any>;
}

export interface AlertRule {
  name: string;
  condition: string;
  threshold: number;
  severity: 'info' | 'warning' | 'error' | 'critical';
  recipients: string[];
  actions: string[];
}

export interface ReportDefinition {
  name: string;
  type: 'status' | 'progress' | 'risk' | 'quality' | 'financial';
  frequency: string;
  recipients: string[];
  sections: ReportSection[];
  format: 'pdf' | 'html' | 'excel';
}

export interface ReportSection {
  name: string;
  type: 'summary' | 'detailed' | 'chart' | 'table';
  content: string[];
  required: boolean;
}

// Rollback Planning Types
export interface RollbackPlan {
  triggers: RollbackTrigger[];
  procedures: RollbackProcedure[];
  decision: RollbackDecision;
  communication: RollbackCommunication;
  validation: RollbackValidation;
}

export interface RollbackTrigger {
  condition: string;
  threshold: any;
  automatic: boolean;
  approver?: string;
  timeframe: string;
}

export interface RollbackProcedure {
  step: number;
  name: string;
  description: string;
  type: 'automatic' | 'manual';
  duration: string;
  validation: string[];
  rollbackValidation: string[];
}

export interface RollbackDecision {
  criteria: string[];
  authority: string[];
  process: string[];
  documentation: string[];
}

export interface RollbackCommunication {
  stakeholders: string[];
  channels: string[];
  timeline: string;
  templates: string[];
}

export interface RollbackValidation {
  checks: string[];
  acceptance: string[];
  signoff: string[];
  monitoring: string;
}