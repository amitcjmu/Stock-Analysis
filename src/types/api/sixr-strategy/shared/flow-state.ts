/**
 * 6R Strategy Flow State Management Types
 * 
 * Flow state tracking, blockers, recommendations, and metrics
 * for strategy flow management.
 * 
 * Generated by CC (Claude Code) - Modularized from flow-management.ts
 */

import { ApprovalRequirement, RiskAssessment } from './base-types';

// Flow State Management
export interface StrategyFlowState {
  flowId: string;
  currentPhase: string;
  nextPhase?: string;
  phaseCompletion: Record<string, boolean>;
  phaseResults: Record<string, unknown>;
  strategyResults: Record<string, unknown>;
  riskProfile: RiskAssessment;
  approvalStatus: ApprovalStatus;
  blockers: StrategyBlocker[];
  warnings: StrategyWarning[];
  recommendations: StrategyRecommendation[];
  metrics: StrategyMetrics;
  createdAt: string;
  updatedAt: string;
}

// Approval Status Tracking
export interface ApprovalStatus {
  overall: 'not_required' | 'pending' | 'approved' | 'rejected' | 'conditional';
  approvals: ApprovalStatusDetail[];
  blockers: string[];
  conditions: string[];
}

export interface ApprovalStatusDetail {
  approvalId: string;
  type: string;
  status: string;
  approver: string;
  requestedAt: string;
  respondedAt?: string;
  comments?: string;
}

// Blockers and Issues
export interface StrategyBlocker {
  id: string;
  type: 'dependency' | 'approval' | 'resource' | 'technical' | 'business';
  description: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  impact: string;
  owner: string;
  resolution: BlockerResolution;
  createdAt: string;
}

export interface BlockerResolution {
  approach: string;
  estimatedResolution: string;
  resources: string[];
  alternatives: string[];
  escalation: string[];
}

// Warnings and Alerts
export interface StrategyWarning {
  id: string;
  type: 'risk' | 'quality' | 'timeline' | 'budget' | 'dependency';
  message: string;
  severity: 'low' | 'medium' | 'high';
  impact: string;
  recommendation: string;
  acknowledged: boolean;
  createdAt: string;
}

// Recommendations
export interface StrategyRecommendation {
  id: string;
  type: 'optimization' | 'risk_mitigation' | 'process_improvement' | 'cost_saving';
  title: string;
  description: string;
  rationale: string;
  effort: 'low' | 'medium' | 'high';
  impact: 'low' | 'medium' | 'high';
  priority: 'very_low' | 'low' | 'medium' | 'high' | 'very_high';
  category: string;
  implementation: RecommendationImplementation;
  status: 'new' | 'considered' | 'accepted' | 'rejected' | 'implemented';
}

export interface RecommendationImplementation {
  approach: string;
  timeline: string;
  resources: string[];
  dependencies: string[];
  risks: string[];
  success_criteria: string[];
}

// Strategy Metrics
export interface StrategyMetrics {
  progress: ProgressMetrics;
  quality: QualityMetrics;
  performance: PerformanceMetrics;
  cost: CostMetrics;
  risk: RiskMetrics;
}

export interface ProgressMetrics {
  overall: number;
  byPhase: Record<string, number>;
  tasksCompleted: number;
  tasksTotal: number;
  milestonesAchieved: number;
  milestonesTotal: number;
  onTrack: boolean;
  daysRemaining: number;
}

export interface QualityMetrics {
  overallScore: number;
  gatesPassed: number;
  gatesTotal: number;
  defectCount: number;
  reworkRate: number;
  complianceScore: number;
  testCoverage: number;
}

export interface PerformanceMetrics {
  throughput: number;
  efficiency: number;
  resourceUtilization: number;
  cycleTime: string;
  leadTime: string;
  velocity: number;
}

export interface CostMetrics {
  budgeted: number;
  actual: number;
  forecast: number;
  variance: number;
  utilizationRate: number;
  costPerDeliverable: number;
  roi: number;
}

export interface RiskMetrics {
  overallScore: number;
  openRisks: number;
  criticalRisks: number;
  mitigatedRisks: number;
  newRisksThisPeriod: number;
  riskVelocity: number;
}
