/**
 * 6R Strategy Flow Status and Progress Types
 * 
 * Flow status tracking, progress monitoring, and detailed phase/task status
 * for strategy flow management.
 * 
 * Generated by CC (Claude Code) - Modularized from flow-management.ts
 */

import { StrategyFlowStatus, StrategyType, PhaseStatus } from './base-types';
import { StrategyBlocker, StrategyWarning, StrategyRecommendation, StrategyMetrics, ApprovalStatusDetail } from './flow-state';

// Status Detail Types
export interface StrategyStatusDetail {
  flowId: string;
  strategyType: StrategyType;
  status: StrategyFlowStatus;
  progress: StrategyProgress;
  currentPhase: string;
  phaseDetails: PhaseStatusDetail[];
  blockers: StrategyBlocker[];
  warnings: StrategyWarning[];
  recommendations: StrategyRecommendation[];
  approvals: ApprovalStatusDetail[];
  metrics: StrategyMetrics;
  nextActions: NextAction[];
  lastUpdated: string;
}

// Progress Tracking
export interface StrategyProgress {
  overall: number;
  phases: PhaseProgress[];
  milestones: MilestoneProgress[];
  timeline: TimelineProgress;
  quality: QualityProgress;
}

export interface PhaseProgress {
  phaseId: string;
  name: string;
  status: PhaseStatus;
  progress: number;
  startDate?: string;
  endDate?: string;
  estimatedCompletion?: string;
  tasks: TaskProgress[];
}

export interface TaskProgress {
  taskId: string;
  name: string;
  status: 'not_started' | 'in_progress' | 'completed' | 'blocked' | 'cancelled';
  progress: number;
  assignee: string;
  estimatedCompletion?: string;
}

export interface MilestoneProgress {
  milestoneId: string;
  name: string;
  date: string;
  status: 'upcoming' | 'at_risk' | 'achieved' | 'missed';
  criteria: MilestoneCriteria[];
}

export interface MilestoneCriteria {
  criterion: string;
  status: 'pending' | 'met' | 'failed';
  evidence?: string;
}

export interface TimelineProgress {
  startDate: string;
  endDate: string;
  currentDate: string;
  percentageComplete: number;
  onTrack: boolean;
  variance: string;
  critical_path: string[];
}

export interface QualityProgress {
  overallScore: number;
  gates: QualityGateProgress[];
  metrics: QualityMetricProgress[];
  issues: QualityIssue[];
}

export interface QualityGateProgress {
  gateId: string;
  name: string;
  status: 'pending' | 'passed' | 'failed' | 'conditional';
  score: number;
  criteria: QualityCriteriaProgress[];
}

export interface QualityCriteriaProgress {
  criterion: string;
  target: number;
  actual: number;
  status: 'met' | 'failed' | 'at_risk';
}

export interface QualityMetricProgress {
  metric: string;
  target: number;
  actual: number;
  trend: 'improving' | 'stable' | 'degrading';
  status: 'on_target' | 'at_risk' | 'off_target';
}

export interface QualityIssue {
  id: string;
  type: 'defect' | 'non_compliance' | 'standard_violation' | 'process_deviation';
  description: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  impact: string;
  resolution: string;
  status: 'open' | 'in_progress' | 'resolved' | 'deferred';
}

// Phase Status Details
export interface PhaseStatusDetail {
  phaseId: string;
  name: string;
  status: PhaseStatus;
  progress: number;
  startDate?: string;
  endDate?: string;
  duration: string;
  deliverables: DeliverableStatus[];
  approvals: ApprovalStatusDetail[];
  risks: string[];
  issues: string[];
}

export interface DeliverableStatus {
  name: string;
  type: string;
  status: 'not_started' | 'in_progress' | 'under_review' | 'completed' | 'approved';
  dueDate: string;
  owner: string;
  quality: number;
}

// Next Actions
export interface NextAction {
  id: string;
  type: 'task' | 'approval' | 'decision' | 'review' | 'escalation';
  description: string;
  priority: 'very_low' | 'low' | 'medium' | 'high' | 'very_high';
  dueDate?: string;
  assignee: string;
  dependencies: string[];
}
