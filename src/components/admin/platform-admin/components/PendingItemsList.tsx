/**
 * PendingItemsList Component for Platform Admin Dashboard
 * Displays list of pending purge requests with actions
 */

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { 
  Building2, 
  Briefcase, 
  MessageSquare, 
  User, 
  Trash2, 
  RotateCcw, 
  Eye, 
  CheckCircle 
} from 'lucide-react';\nimport { formatDate, getItemTypeColor, getItemTypeLabel } from '@/components/admin/shared/utils/adminFormatters';\nimport { SoftDeletedItem } from './PlatformStats';\n\nexport interface PendingItemsListProps {\n  pendingItems: SoftDeletedItem[];\n  actionLoading: string | null;\n  onViewDetails: (item: SoftDeletedItem) => void;\n  onApprove: (item: SoftDeletedItem) => void;\n  onReject: (item: SoftDeletedItem) => void;\n  className?: string;\n}\n\nexport const PendingItemsList: React.FC<PendingItemsListProps> = ({\n  pendingItems,\n  actionLoading,\n  onViewDetails,\n  onApprove,\n  onReject,\n  className = ''\n}) => {\n  const getItemTypeIcon = (itemType: string) => {\n    switch (itemType) {\n      case 'client_account':\n        return <Building2 className=\"w-4 h-4\" />;\n      case 'engagement':\n        return <Briefcase className=\"w-4 h-4\" />;\n      case 'data_import_session':\n        return <MessageSquare className=\"w-4 h-4\" />;\n      case 'user_profile':\n        return <User className=\"w-4 h-4\" />;\n      default:\n        return <Trash2 className=\"w-4 h-4\" />;\n    }\n  };\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle>Pending Purge Requests</CardTitle>\n        <CardDescription>\n          Review and approve or reject permanent deletion requests from client and engagement admins\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        {pendingItems.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <CheckCircle className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium mb-2\">No pending requests</h3>\n            <p className=\"text-muted-foreground\">\n              All deletion requests have been processed. The platform is up to date.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {pendingItems.map((item) => (\n              <div key={item.id} className=\"border rounded-lg p-4 space-y-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1 space-y-2\">\n                    {/* Item Header */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                        {getItemTypeIcon(item.item_type)}\n                      </div>\n                      <div>\n                        <h4 className=\"font-medium\">{item.item_name}</h4>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge className={getItemTypeColor(item.item_type)}>\n                            {getItemTypeLabel(item.item_type)}\n                          </Badge>\n                          <span className=\"text-xs text-muted-foreground\">\n                            {formatDate(item.deleted_at)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Context Information */}\n                    <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\n                      {item.client_account_name && (\n                        <div className=\"flex items-center gap-1\">\n                          <Building2 className=\"w-3 h-3\" />\n                          {item.client_account_name}\n                        </div>\n                      )}\n                      {item.engagement_name && (\n                        <div className=\"flex items-center gap-1\">\n                          <Briefcase className=\"w-3 h-3\" />\n                          {item.engagement_name}\n                        </div>\n                      )}\n                      <div className=\"flex items-center gap-1\">\n                        <User className=\"w-3 h-3\" />\n                        {item.deleted_by_name} ({item.deleted_by_email})\n                      </div>\n                    </div>\n                    \n                    {/* Deletion Reason */}\n                    {item.delete_reason && (\n                      <div className=\"bg-gray-50 rounded p-3\">\n                        <p className=\"text-sm\">\n                          <strong>Reason:</strong> {item.delete_reason}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Action Buttons */}\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => onViewDetails(item)}\n                    >\n                      <Eye className=\"w-4 h-4 mr-1\" />\n                      Details\n                    </Button>\n                    \n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => onReject(item)}\n                      disabled={actionLoading === item.id}\n                    >\n                      <RotateCcw className=\"w-4 h-4 mr-1\" />\n                      Restore\n                    </Button>\n                    \n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => onApprove(item)}\n                      disabled={actionLoading === item.id}\n                    >\n                      {actionLoading === item.id ? (\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      ) : (\n                        <>\n                          <Trash2 className=\"w-4 h-4 mr-1\" />\n                          Approve Purge\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};