#!/usr/bin/env python3
"""
Structured Demo Data Seeding Script

This script creates a structured solution for populating discovery and asset data
that works across all environments using the Master Flow Orchestrator pattern.

Key Features:
1. Uses MFO pattern for creating discovery flows
2. Populates assets table with proper discovered_at timestamps
3. Populates canonical_applications table for Collection flow
4. Ensures proper multi-tenant scoping
5. Creates proper discovery flow state
6. Idempotent operations (can be run multiple times safely)

Usage:
    python scripts/seed_structured_demo_data.py

Generated by CC (Claude Code)
"""

import asyncio
import os
import sys

# Add parent directory to path
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

# Must be imported after path manipulation
from seed_structured_demo_data import StructuredDemoSeeder  # noqa: E402


async def main():
    """Main entry point"""
    seeder = StructuredDemoSeeder()
    success = await seeder.seed_all_data()

    if success:
        print("üöÄ Ready to test application selection page!")
        sys.exit(0)
    else:
        print("üí• Seeding failed - check logs above")
        sys.exit(1)


if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\n\n‚ö†Ô∏è Seeding cancelled by user")
        sys.exit(1)
    except Exception as e:
        print(f"\n‚ùå Unexpected error: {e}")
        sys.exit(1)
