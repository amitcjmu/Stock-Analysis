"""
Base module for CrewAI Flow Lifecycle Manager

Contains shared constants, configuration, and common imports.
Generated by CC for modularization while maintaining backward compatibility.
"""

import logging
from typing import TYPE_CHECKING

# CrewAI Flow Integration (Conditional)
if TYPE_CHECKING:
    from app.services.crewai_flows.unified_discovery_flow import UnifiedDiscoveryFlow
else:
    try:
        from app.services.crewai_flows.unified_discovery_flow import (
            UnifiedDiscoveryFlow,
        )

        CREWAI_FLOWS_AVAILABLE = True
    except ImportError:
        CREWAI_FLOWS_AVAILABLE = False
        UnifiedDiscoveryFlow = None

# Configure logger
logger = logging.getLogger(__name__)

# Flow status constants
TERMINAL_STATUSES = ["deleted", "cancelled", "completed"]
RESUMABLE_STATUSES = ["processing", "waiting_for_approval", "paused", "error"]

# Phase method mapping for resumption
PHASE_METHOD_MAP = {
    "data_import": "execute_data_import_validation_agent_method",
    "attribute_mapping": "execute_attribute_mapping_agent_method",
    "data_cleansing": "execute_data_cleansing_agent_method",
    "inventory": "execute_parallel_analysis_agents_method",
    "dependencies": "execute_parallel_analysis_agents_method",
    "tech_debt": "execute_parallel_analysis_agents_method",
}
