"""
Cache Consistency Checker Exceptions

This module defines all exceptions specific to cache consistency checking operations.
These exceptions provide detailed error information for consistency check failures,
repair operation failures, and validation errors.

ðŸ”’ Security: Clear error messaging without exposing sensitive data
âš¡ Performance: Lightweight exception classes for minimal overhead
ðŸŽ¯ Coherence: Specific exception types for different failure scenarios

Generated by CC (Claude Code)
"""

from typing import Optional, Any, Dict


class CacheConsistencyError(Exception):
    """Base exception for cache consistency errors"""

    def __init__(
        self,
        message: str,
        cache_key: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message)
        self.cache_key = cache_key
        self.details = details or {}


class ConsistencyCheckError(CacheConsistencyError):
    """Exception raised when consistency check operation fails"""

    def __init__(
        self,
        message: str,
        cache_key: Optional[str] = None,
        check_type: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, cache_key, details)
        self.check_type = check_type


class ConsistencyRepairError(CacheConsistencyError):
    """Exception raised when repair operation fails"""

    def __init__(
        self,
        message: str,
        cache_key: Optional[str] = None,
        repair_action: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, cache_key, details)
        self.repair_action = repair_action


class ConsistencyValidationError(CacheConsistencyError):
    """Exception raised when data validation fails during consistency checks"""

    def __init__(
        self,
        message: str,
        cache_key: Optional[str] = None,
        validation_type: Optional[str] = None,
        validation_errors: Optional[list] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, cache_key, details)
        self.validation_type = validation_type
        self.validation_errors = validation_errors or []


class ConsistencyAuditError(CacheConsistencyError):
    """Exception raised when audit operation fails"""

    def __init__(
        self,
        message: str,
        audit_id: Optional[str] = None,
        partial_results: Optional[list] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, None, details)
        self.audit_id = audit_id
        self.partial_results = partial_results or []


class QuarantineError(CacheConsistencyError):
    """Exception raised when quarantine operations fail"""

    def __init__(
        self,
        message: str,
        cache_key: Optional[str] = None,
        quarantine_reason: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, cache_key, details)
        self.quarantine_reason = quarantine_reason


class MetricsCollectionError(CacheConsistencyError):
    """Exception raised when metrics collection fails"""

    def __init__(
        self,
        message: str,
        metric_type: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, None, details)
        self.metric_type = metric_type


class ScheduledAuditError(CacheConsistencyError):
    """Exception raised when scheduled audit operations fail"""

    def __init__(
        self,
        message: str,
        audit_interval: Optional[int] = None,
        last_successful_audit: Optional[str] = None,
        details: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message, None, details)
        self.audit_interval = audit_interval
        self.last_successful_audit = last_successful_audit


# Export all exception classes
__all__ = [
    "CacheConsistencyError",
    "ConsistencyCheckError",
    "ConsistencyRepairError",
    "ConsistencyValidationError",
    "ConsistencyAuditError",
    "QuarantineError",
    "MetricsCollectionError",
    "ScheduledAuditError",
]
