"""
Invalidation-specific exceptions for cache invalidation strategies.

This module defines custom exceptions used throughout the cache invalidation
system to provide specific error handling and diagnostics.

Generated by CC (Claude Code)
"""

from typing import Any, Dict, List, Optional


class InvalidationError(Exception):
    """Base exception for cache invalidation errors"""

    def __init__(
        self,
        message: str,
        strategy_name: Optional[str] = None,
        keys_affected: Optional[List[str]] = None,
        metadata: Optional[Dict[str, Any]] = None,
    ):
        super().__init__(message)
        self.strategy_name = strategy_name
        self.keys_affected = keys_affected or []
        self.metadata = metadata or {}


class InvalidationStrategyError(InvalidationError):
    """Exception raised when an invalidation strategy fails"""

    pass


class InvalidationVersionError(InvalidationError):
    """Exception raised when cache version mismatch occurs"""

    def __init__(
        self,
        message: str,
        cache_key: str,
        expected_version: str,
        actual_version: str,
        **kwargs
    ):
        super().__init__(message, **kwargs)
        self.cache_key = cache_key
        self.expected_version = expected_version
        self.actual_version = actual_version


class InvalidationTimeoutError(InvalidationError):
    """Exception raised when invalidation operations timeout"""

    def __init__(self, message: str, timeout_seconds: float, **kwargs):
        super().__init__(message, **kwargs)
        self.timeout_seconds = timeout_seconds


class CascadeInvalidationError(InvalidationError):
    """Exception raised when cascade invalidation fails or exceeds limits"""

    def __init__(self, message: str, cascade_depth: int, max_depth: int, **kwargs):
        super().__init__(message, **kwargs)
        self.cascade_depth = cascade_depth
        self.max_depth = max_depth


class WritePatternError(InvalidationError):
    """Exception raised when write pattern operations fail"""

    def __init__(self, message: str, pattern_type: str, **kwargs):
        super().__init__(message, **kwargs)
        self.pattern_type = pattern_type


class BulkInvalidationError(InvalidationError):
    """Exception raised when bulk invalidation operations fail"""

    def __init__(
        self,
        message: str,
        total_keys: int,
        failed_keys: int,
        successful_keys: int,
        **kwargs
    ):
        super().__init__(message, **kwargs)
        self.total_keys = total_keys
        self.failed_keys = failed_keys
        self.successful_keys = successful_keys


__all__ = [
    "InvalidationError",
    "InvalidationStrategyError",
    "InvalidationVersionError",
    "InvalidationTimeoutError",
    "CascadeInvalidationError",
    "WritePatternError",
    "BulkInvalidationError",
]
