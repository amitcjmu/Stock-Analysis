"""
Event-Driven Cache Invalidator Module

This module provides enterprise-grade event-driven cache invalidation for
the auth performance optimization system. All original APIs are preserved
for backward compatibility.

IMPORTANT: This is a modularized version of the original event_driven_invalidator.py
All existing imports continue to work unchanged.

Generated by CC (Claude Code)
"""

# Import all base classes and enums
from .base import (
    EventProcessingStats,
    EventSource,
)

# Import event classes
from .events import (
    CacheInvalidationEvent,
)

# Import detector classes
from .detectors import (
    EntityChangeDetector,
)

# Import main invalidator class
from .invalidator import (
    EventDrivenInvalidator,
)

# Import utility functions
from .utils import (
    create_event_driven_invalidator,
    get_event_driven_invalidator,
    set_event_driven_invalidator,
)

# Preserve all public exports for backward compatibility
__all__ = [
    # Base classes and enums
    "EventSource",
    "EventProcessingStats",
    # Event classes
    "CacheInvalidationEvent",
    # Detector classes
    "EntityChangeDetector",
    # Main invalidator class
    "EventDrivenInvalidator",
    # Utility functions
    "create_event_driven_invalidator",
    "get_event_driven_invalidator",
    "set_event_driven_invalidator",
]

# Export docstring from original module
__doc__ = """
Event-Driven Cache Invalidator for Auth Performance Optimization

This module implements an event-driven cache invalidation system that:
- Listens for database change events via SQLAlchemy ORM hooks
- Processes user action events (login, logout, context changes, etc.)
- Handles bulk operations with efficient batching
- Supports real-time cache updates for critical data changes
- Integrates with the CacheInvalidationManager for coordinated invalidation

The invalidator uses SQLAlchemy event listeners and custom event dispatching
to ensure cache consistency across the auth performance system.

ðŸ”’ Security: Multi-tenant isolation and secure event processing
âš¡ Performance: Optimized event processing with minimal database overhead
ðŸŽ¯ Coherence: Real-time cache updates with dependency tracking
ðŸ“Š Analytics: Comprehensive event tracking and metrics collection

Generated by CC (Claude Code)
"""
