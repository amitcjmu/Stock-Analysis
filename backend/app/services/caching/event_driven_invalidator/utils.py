"""
Utility functions and factory methods for Event-Driven Cache Invalidator

This module contains factory functions and utility methods for creating
and managing EventDrivenInvalidator instances.

Generated by CC (Claude Code)
"""

from typing import Optional, TYPE_CHECKING

if TYPE_CHECKING:
    from app.services.caching.cache_invalidation_manager import CacheInvalidationManager

from .invalidator import EventDrivenInvalidator


# Factory function for dependency injection
def create_event_driven_invalidator(
    invalidation_manager: "CacheInvalidationManager",
) -> EventDrivenInvalidator:
    """Create EventDrivenInvalidator with dependencies"""
    return EventDrivenInvalidator(invalidation_manager)


# Singleton instance for global access
_event_driven_invalidator: Optional[EventDrivenInvalidator] = None


def get_event_driven_invalidator() -> Optional[EventDrivenInvalidator]:
    """Get singleton EventDrivenInvalidator instance"""
    return _event_driven_invalidator


def set_event_driven_invalidator(invalidator: EventDrivenInvalidator) -> None:
    """Set singleton EventDrivenInvalidator instance"""
    global _event_driven_invalidator
    _event_driven_invalidator = invalidator
