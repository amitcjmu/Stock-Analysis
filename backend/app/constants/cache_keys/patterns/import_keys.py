"""
Data Import Cache Key Patterns

Cache key generation for data import operations including metadata,
validation results, and schema detection.

Generated by CC (Claude Code)
"""

from .base import BaseCacheKeys, CACHE_VERSION


class ImportCacheKeys(BaseCacheKeys):
    """
    Cache key patterns for data import operations.

    Handles import metadata, validation results, and detected
    data schemas during the data import process.
    """

    @staticmethod
    def import_metadata(import_id: str, client_id: str, engagement_id: str) -> str:
        """
        Cache key for data import metadata and status.
        TTL: 5 minutes
        Invalidation: on import status changes
        """
        return f"{CACHE_VERSION}:client:{client_id}:engagement:{engagement_id}:import:{import_id}:metadata"

    @staticmethod
    def import_validation_results(import_id: str, client_id: str) -> str:
        """
        Cache key for data import validation results.
        TTL: 30 minutes (expensive to regenerate)
        Invalidation: on data changes, re-validation
        """
        return f"{CACHE_VERSION}:client:{client_id}:import:{import_id}:validation"

    @staticmethod
    def import_schema(import_id: str, client_id: str) -> str:
        """
        Cache key for detected import data schema.
        TTL: 1 hour (rarely changes after detection)
        Invalidation: on schema re-detection
        """
        return f"{CACHE_VERSION}:client:{client_id}:import:{import_id}:schema"
